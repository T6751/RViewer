!function t(e,i,r){function n(a,o){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[a]={exports:{}};e[a][0].call(u.exports,(function(t){return n(e[a][1][t]||t)}),u,u.exports,t,e,i,r)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(t,e,i){"use strict";const r=t("./lib/loader.js"),n=t("./lib/icon_reader.js"),s=t("./lib/player.js");document.addEventListener("DOMContentLoaded",(async function(){let t=document.createElement("h1"),e=!1,i=document.createElement("input"),a=document.createElement("input");i.type="file",a.type="button",a.value="Open demo from file",a.addEventListener("click",()=>{if(!i.files[0])return;if(e)return;let a=new FileReader;a.onload=()=>{if(e)return;let i=a.result;e=!0,document.body.innerHTML="",document.body.appendChild(t),async function(t,e){e.textContent="Parsing demo file...";let i=await r(t);console.log(i),e.textContent="Downloading icons...";let a=new Map,o=[],l=0;for(let t of i.icons_used)o.push((async()=>{let r="https://cdn.jsdelivr.net/combine/gh/"+window.repository+"@3770b7af08c7f4d8a0e0dfeb2dc16575d2306427/"+t+",gh/UDaV73rus/TauCetiClassic@8dcc9c1e0b5b6da13bae90e27b2eafa6537b2208/"+t;console.log(r);try{let s=await n(r);a.set(t,s)}catch(t){console.error(t)}finally{l++,e.textContent="Downloading icons..."+(100*l/i.icons_used.length).toFixed(1)+"%"}})());await Promise.all(o);let h=await(await fetch("https://cdn.jsdelivr.net/gh/"+window.repository+"@"+i.commit+"/code/modules/goonchat/browserassets/css/browserOutput.css")).text();h=h.replace(/((?:^|[},])[^\@\{]*?)([a-zA-Z.#\[\]":=\-_][a-zA-Z0-9.# \[\]":=\-_]*)(?=.+\{)/g,"$1.chat_window $2"),h=h.replace(/height: [^;]+%;/g,""),h=h.replace(/ ?html| ?body/g,"");let u=document.createElement("style");u.innerHTML=h,document.head.appendChild(u),console.log(a),window.demo_player=new s(i,a)}(i,t)},a.readAsArrayBuffer(i.files[0])}),document.body.appendChild(i),document.body.appendChild(a)}))},{"./lib/icon_reader.js":4,"./lib/loader.js":5,"./lib/player.js":7}],2:[function(t,e,i){e.exports=class{constructor(t){t||(t={}),this.icon=t.icon||null,this.icon_state=t.icon_state||null,this.name=t.name||null,this.appearance_flags=t.appearance_flags||0,this.layer=void 0!==t.layer?t.layer:2,this.plane=void 0!==t.plane?t.plane:-32767,this.dir=void 0!==t.dir?t.dir:2,this.color=t.color||"#ffffff",this.alpha=void 0!==t.alpha?t.alpha:255,this.pixel_x=t.pixel_x||0,this.pixel_y=t.pixel_y||0,this.blend_mode=t.blend_mode||0,this.transform=t.transform||[1,0,0,0,1,0],this.invisibility=t.invisibility||0,this.pixel_w=t.pixel_w||0,this.pixel_z=t.pixel_z||0,this.overlays=t.overlays||[],this.underlays=t.underlays||[],this.sorted_overlays=null,Object.seal(this)}}},{}],3:[function(t,e,i){"use strict";e.exports=class{constructor(t){if(this.icon_list=[],this.num_vertices=0,this.client=t,this.init_buffers(),this.program=this.client.shader_default,this.client.gl_current_batch)throw new Error("GL batch already exists");this.client.gl_current_batch=this}init_buffers(){let t=this.client.gl;this.max_vertices=4096,this.buffers={vertices:{buf:new Float32Array(2*this.max_vertices),size:2,attrib:"a_position",gl_buf:null,gl_pos:null,type:t.FLOAT},uv:{buf:new Float32Array(2*this.max_vertices),size:2,attrib:"a_uv",gl_buf:null,gl_pos:null,type:t.FLOAT},colors:{buf:new Float32Array(4*this.max_vertices),size:4,attrib:"a_color",gl_buf:null,gl_pos:null,type:t.FLOAT},texture_indices:{buf:new Uint8Array(this.max_vertices),size:1,attrib:"a_tex_index",gl_buf:null,gl_pos:null,type:t.UNSIGNED_BYTE}}}reset(){this.num_vertices=0,this.icon_list.length=0}bind_textures(){const t=this.client.gl;for(let e=0;e<this.icon_list.length;e++){let i=t.getUniformLocation(this.program,`u_texture[${e}]`);t.uniform1i(i,e),t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.client.get_texture(this.icon_list[e]))}}can_fit(t,e){if(this.num_vertices+t>this.max_vertices)return!1;if("string"==typeof e)return!!this.icon_list.includes(e)||this.icon_list.length<this.client.max_icons_per_batch;let i=this.icon_list;for(let t of e)this.icon_list.includes(t)||i++;return!(i>this.client.max_icons_per_batch)}assign_uniforms(){const t=this.client.gl;let e=this.client.gl_uniform_cache.get(this.program);t.uniform2fv(e.u_viewport_size,this.client.gl_viewport)}draw(){if(!this.num_vertices)return;if(this.client.gl_current_batch!=this)throw new Error("Cannot draw non-active batch");let t=this.client.gl;t.useProgram(this.program),this.bind_textures(),this.assign_uniforms();for(let e of Object.values(this.buffers)){let i=e.gl_buf=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,e.buf.subarray(0,this.num_vertices*e.size),t.STREAM_DRAW);let r=e.gl_pos=t.getAttribLocation(this.program,e.attrib);t.vertexAttribPointer(r,e.size,e.type,!1,0,0),t.enableVertexAttribArray(r)}t.drawArrays(t.TRIANGLES,0,this.num_vertices);for(let e of Object.values(this.buffers))t.deleteBuffer(e.gl_buf),e.gl_buf=null;this.reset()}}},{}],4:[function(t,e,i){(function(i){"use strict";let r=t("streampng"),n=t("zlib");const s=[2,1,4,8,6,10,5,9];e.exports=async function(t){let e=await fetch(t),a=await e.arrayBuffer(),o=new Blob([a],{type:"image/png"}),l=document.createElement("img");l.src=URL.createObjectURL(o);const h={image:l,icon_states:new Map,icon_states_movement:new Map};let u=new r(new i(a)),[f,c]=await new Promise((t,e)=>{let i,r;u.on("error",t=>{e(t)}),u.on("IHDR",e=>{i=e,r&&t([i,r])}),u.on("zTXt",e=>{r=e,i&&t([i,r])})}),d=(await new Promise((t,e)=>{n.inflate(c.compressedText,(i,r)=>{i&&e(i),t(r)})})).toString("ascii").split("\n"),p=0,_=0,g=[],m=null,w=0;for(let t=0;t<d.length;t++){let e=/\t?([a-zA-Z0-9]+) ?= ?"?([^\r\n"]+)/.exec(d[t]);if(!e)continue;let i=e[1],r=e[2];"width"==i?p=+r:"height"==i?_=+r:"state"==i?(m&&g.push(m),m={state:r}):"dirs"==i||"frames"==i||"movement"==i?m[i]=+r:"delay"==i&&(m.delay=JSON.parse("["+r+"]"))}m&&g.push(m);for(let t=0;t<g.length;t++){let e=g[t];w+=e.frames*e.dirs,e.delay||(e.delay=[1]),e.frames||(e.frames=1),e.dirs||(e.dirs=1)}p||_||!w||(_=f.height,p=f.width/w);let b=f.width/p,y=0;for(let t=0;t<g.length;t++){let e=g[t],i={},r=e.state;i.dir_count=e.dirs,i.width=p,i.height=_;let n=new Map;for(let t=0;t<e.dirs;t++){let i={},r=[];i.frames=r;let a=0;for(let i=0;i<e.frames;i++){let n=y+i*e.dirs+t;r.push({x:n%b*p,y:Math.floor(n/b)*_,delay:e.delay[i]}),a+=e.delay[i]}i.total_delay=a,n.set(s[t],i)}i.dirs=n,i.tile_size=32,e.movement?h.icon_states_movement.set(r,i):h.icon_states.set(r,i),y+=e.dirs*e.frames}return h}}).call(this,t("buffer").Buffer)},{buffer:24,streampng:64,zlib:22}],5:[function(t,e,i){"use strict";const r=t("./appearance.js");e.exports=async function(t){let e=(new TextDecoder).decode(t).split(/\r\n|\r|\n/);if(e.length--,!e.length||!e[0].startsWith("demo version "))return;let i=+e[0].split(" ")[2];if(!(i<=1))return;console.log("version "+i);let n={version:i,init_turfs:[],init_objs:[],timeframes:[]},s=null,a=[],o=[],l=[];n.icons_used=a,n.icon_state_caches=o;let h=new Map,u=new Map,f=new Map,c=null;new Map;for(let t=1;t<e.length;t++){let i=e[t];if(0==i.length)continue;let r=/^([a-z]+) /i.exec(i)[1],a=i.substring(r.length+1);if("commit"==r)n.commit=a;else if("init"==r){let i=a.split(" ");n.maxx=+i[0],n.maxy=+i[1],n.maxz=+i[2];for(let i=1;i<=n.maxz;i++){let r={txt:e[++t],idx:0,line:t},s=[],a=null;for(;r.idx<r.txt.length;){if("0123456789".includes(r.txt[r.idx])){let t=d(r);for(let e=1;e<t;e++)u.set(`${s.length%n.maxx+1},${Math.floor(s.length/n.maxx)+1},${i}`,{appearance:a}),s.push(a)}else a=m(r,a,!0,s.length%n.maxx+1,Math.floor(s.length/n.maxx)+1,i),u.set(`${s.length%n.maxx+1},${Math.floor(s.length/n.maxx)+1},${i}`,{appearance:a}),s.push(a);if(s.length>n.maxx*n.maxy)throw new Error(`Exceeded z-level size at ${r.line+1}:${r.idx+1}`);","==r.txt[r.idx]&&r.idx++}if(s.length!=n.maxx*n.maxy)throw new Error(`Z-level of size ${n.maxx}x${n.maxy} should have ${n.maxx*n.maxy} turfs, has ${s.length} turfs instead`);n.init_turfs.push(s)}for(let i=1;i<=n.maxz;i++){let r={txt:e[++t],idx:0,line:t},s=0;for(;r.idx<r.txt.length;){if("0123456789".includes(r.txt[r.idx])?s+=d(r):w(r,`${s%n.maxx+1},${Math.floor(s/n.maxx)+1},${i}`),s>n.maxx*n.maxy)throw new Error(`Exceeded z-level size at ${r.line+1}:${r.idx+1}`);","==r.txt[r.idx]&&r.idx++}}{let i={txt:e[++t],idx:0,line:t};for(;i.idx<i.txt.length&&(w(i,null),","==i.txt[i.idx]);)i.idx++}}else if("time"==r)s={time:+a,forward:{turf_changes:[],add_atoms:[],change_atoms:[],del_atoms:[],login:[],logout:[],setmob:[]},backward:{turf_changes:[],add_atoms:[],change_atoms:[],del_atoms:[],login:[],logout:[],setmob:[]},chat:[]},n.timeframes.push(s);else if("new"==r){let e={txt:a,idx:0,line:t};for(;e.idx<e.txt.length;){let t=p(e),i=h.get(t);if(i&&(s.backward.add_atoms.push(Object.assign({ref:t},i)),s.forward.del_atoms.push(t))," "!=e.txt[e.idx])throw new Error(`Expected " " at ${e.line+1}:${e.idx+1}, found ${e.txt[e.idx]} instead.`);e.idx++;let r=_(e);if(" "!=e.txt[e.idx])throw new Error(`Expected " " at ${e.line+1}:${e.idx+1}, found ${e.txt[e.idx]} instead.`);e.idx++;let n={loc:r,appearance:m(e),last_loc:r,last_move:s.time};h.set(t,n),s.forward.add_atoms.push(Object.assign({ref:t},n)),s.backward.del_atoms.push(t),","==e.txt[e.idx]&&e.idx++}}else if("del"==r){let e={txt:a,idx:0,line:t};for(;e.idx<e.txt.length;){let t=p(e),i=h.get(t);i&&(s.backward.add_atoms.push(Object.assign({ref:t},i)),s.forward.del_atoms.push(t),h.delete(t)),","==e.txt[e.idx]&&e.idx++}}else if("update"==r){let e={txt:a,idx:0,line:t};for(;e.idx<e.txt.length;){let t=p(e),i=h.get(t);if(" "!=e.txt[e.idx])throw new Error(`Expected " " at ${e.line+1}:${e.idx+1}, found ${e.txt[e.idx]} instead.`);e.idx++;let r=_(e,i?i.loc:void 0);if(" "!=e.txt[e.idx])throw new Error(`Expected " " at ${e.line+1}:${e.idx+1}, found ${e.txt[e.idx]} instead.`);e.idx++;let n=m(e,i?i.appearance:void 0);i?(s.backward.change_atoms.push(Object.assign({ref:t},i)),i.appearance=n,r!=i.loc&&(i.last_loc=i.loc,i.loc=r,i.last_move=s.time),s.forward.change_atoms.push(Object.assign({ref:t},i)),","==e.txt[e.idx]&&e.idx++):(i={loc:r,appearance:n,last_loc:r,last_move:s.time},h.set(t,i),s.forward.add_atoms.push(Object.assign({ref:t},i)),s.backward.del_atoms.push(t),","==e.txt[e.idx]&&e.idx++)}}else if("turf"==r){let e={txt:a,idx:0,line:t};for(;e.idx<e.txt.length;){if("("!=e.txt[e.idx])throw new Error(`Expected ( at ${e.line+1}:${e.idx+1}, found ${e.txt[e.idx]} instead.`);e.idx++;let t=_(e);if(")"!=e.txt[e.idx])throw new Error(`Expected ) at ${e.line+1}:${e.idx+1}, found ${e.txt[e.idx]} instead.`);if(e.idx++,"="!=e.txt[e.idx])throw new Error(`Expected = at ${e.line+1}:${e.idx+1}, found ${e.txt[e.idx]} instead.`);e.idx++;let i=u.get(t);i||(i={appearance:null},u.set(i));let r=m(e,i?i.appearance:void 0);s.backward.turf_changes.push(Object.assign({loc:t},i)),i.appearance=r,s.forward.turf_changes.push(Object.assign({loc:t},i)),","==e.txt[e.idx]&&e.idx++}}else if("login"==r)s.forward.login.push(a),s.backward.logout.push(a);else if("logout"==r)s.forward.logout.push(a),s.backward.login.push(a);else if("setmob"==r){let[t,e]=a.split(" "),i=f.get(t);s.backward.setmob.splice(0,0,{ckey:t,ref:i}),f.set(t,e),s.forward.setmob.push({ckey:t,ref:e})}else if("chat"==r){let t=/^([^ ]+) (.+)$/.exec(a),e=t[1].split(","),i=t[2];"="==i?i=c:(i=JSON.parse(i),c=i),s.chat.push({clients:e,message:i})}}function d(t){let e=t.idx;for(;"01234567890.-eE".includes(t.txt[t.idx]);)t.idx++;return+t.txt.substring(e,t.idx)}function p(t){if("["!=t.txt[t.idx])throw new Error(`Expected [ at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead.`);let e=t.idx;for(;"[0x123456789abcdefABCDEF".includes(t.txt[t.idx]);)t.idx++;if("]"!=t.txt[t.idx])throw new Error(`Expected ] at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead.`);return t.idx++,t.txt.substring(e,t.idx)}function _(t,e){if("="==t.txt[t.idx])return t.idx++,e;if("["==t.txt[t.idx])return p(t);if("n"==t.txt[t.idx])return t.idx+=4,null;{let e=d(t);if(","!=t.txt[t.idx])throw new Error(`Expected , at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);t.idx++;let i=d(t);if(","!=t.txt[t.idx])throw new Error(`Expected , at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);return t.idx++,`${e},${i},${d(t)}`}}function g(t){let e=t.idx;if('"'!=t.txt[t.idx])return"";for(t.idx++;'"'!=t.txt[t.idx];)"\\"==t.txt[t.idx]&&t.idx++,t.idx++;return t.idx++,JSON.parse(t.txt.substring(e,t.idx))}function m(t,e,i=!0,n=0,s=0,h=0){if("n"==t.txt[t.idx])return t.idx++,null;if("="==t.txt[t.idx])return t.idx++,e;if("s"==t.txt[t.idx]||"t"==t.txt[t.idx]){let e=new r({icon:"icons/turf/space.dmi",icon_state:"?",name:"space",layer:1.8,plane:-95});if("t"==t.txt[t.idx]){switch(t.idx++,e.dir=+t.txt[t.idx],t.txt[t.idx]){case"1":e.transform=[-1,0,0,0,-1,0];break;case"4":e.transform=[0,-1,0,1,0,0];break;case"8":e.transform=[0,1,0,-1,0,0]}e.icon_state="speedspace_ns_?"}return t.idx++,e}let u,f=null;if("~"==t.txt[t.idx]?(t.idx++,e||console.log(`Comparison to null at ${t.line+1}:${t.idx+1}`),f=new r(e),i||(f.overlays=[],f.underlays=[])):f=new r,"{"!=t.txt[t.idx])throw new Error(`Expected { at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead.`);if(t.idx++,"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])if('"'==t.txt[t.idx])f.icon=g(t),a.push(f.icon),u=[],o.push(u);else if("n"==t.txt[t.idx])t.idx+=4,f.icon=null,a.push(f.icon),u=[],o.push([]);else{let e=d(t);f.icon=a[e-1],u=o[e-1]}if("}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]){if(!u)throw console.log(a),console.log(u),new Error(`Unknown icon at ${t.line+1}:${t.idx+1}`);if('"'==t.txt[t.idx])f.icon_state=g(t),u.push(f.icon_state);else if("n"==t.txt[t.idx])t.idx+=4,f.icon_state=null,u.push(f.icon_state);else{let e=d(t);f.icon_state=u?u[e-1]:""}}if("}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx])if('"'==t.txt[t.idx])f.name=g(t),l.push(f.name);else if("n"==t.txt[t.idx])t.idx+=4,f.name=null,l.push(f.name);else{let e=d(t);f.name=l[e-1]}if("}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.appearance_flags=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.layer=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.plane=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.dir=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx])if("w"==t.txt[t.idx])f.color="#ffffff",t.idx++;else if("#"==t.txt[t.idx])f.color=t.txt.substring(t.idx,t.idx+7),t.idx+=7;else for(f.color=[];"-.0123456789".includes(t.txt[t.idx]);)f.color.push(d(t)/255),","==t.txt[t.idx]&&t.idx++;if("}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.alpha=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.pixel_x=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.pixel_y=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.blend_mode=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx])if("i"==t.txt[t.idx])f.transform=[1,0,0,0,1,0],t.idx++;else for(f.transform=[];"-.0123456789".includes(t.txt[t.idx]);)f.transform.push(d(t)),","==t.txt[t.idx]&&t.idx++;if("}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.invisibility=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.pixel_w=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,";"!=t.txt[t.idx]&&(f.pixel_z=d(t)),"}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,"["==t.txt[t.idx]){for(f.overlays=[];"[,".includes(t.txt[t.idx])&&(t.idx++,"]"!=t.txt[t.idx]);)f.overlays.push(m(t,f,!1,n,s,h));if("["!=t.txt[t.idx]||f.overlays.length||t.idx++,"]"!=t.txt[t.idx])throw new Error(`Expected ] or , at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);t.idx++}if("}"==t.txt[t.idx])return t.idx++,f;if(";"!=t.txt[t.idx])throw new Error(`Expected ; at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,"["==t.txt[t.idx]){for(f.underlays=[];"[,".includes(t.txt[t.idx])&&(t.idx++,"]"!=t.txt[t.idx]);)f.underlays.push(m(t,f,!1,n,s,h));if("["!=t.txt[t.idx]||f.underlays.length||t.idx++,"]"!=t.txt[t.idx])throw new Error(`Expected ] or , at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);t.idx++}if("}"!=t.txt[t.idx])throw new Error(`Expected } at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);return t.idx++,f}function w(t,e){let i={loc:e};if(i.ref=p(t),n.init_objs.push(i),"="!=t.txt[t.idx])throw new Error(`Expected = at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);if(t.idx++,i.appearance=m(t),"("==t.txt[t.idx]){for(t.idx++;")"!=t.txt[t.idx];){if(w(t,i.ref),!"),".includes(t.txt[t.idx]))throw new Error(`Expected ) or , at ${t.line+1}:${t.idx+1}, found ${t.txt[t.idx]} instead`);","==t.txt[t.idx]&&t.idx++}t.idx++}h.set(i.ref,{appearance:i.appearance,loc:e,last_loc:e,last_move:0})}return n.duration=s.time,n}},{"./appearance.js":2}],6:[function(t,e,i){"use strict";class r{constructor(t,e,i,r,n,s){this.a=t,this.b=e,this.c=i,this.d=r,this.e=n,this.f=s,Object.freeze(this)}multiply(t){let e=this.a,i=this.b,n=this.c,s=this.d,a=this.e,o=this.f;if(t instanceof Array)return[t[0]*e+t[1]*n+a,t[0]*i+t[1]*s+o];let l=t.a,h=t.b,u=t.c,f=t.d,c=t.e,d=t.f;return new r(e*l+h*n,l*i+h*s,e*u+n*f,i*u+s*f,a+e*c+n*d,i*c+o+s*d)}inverse(){let t=this.a,e=this.b,i=this.c,n=this.d,s=this.e,a=this.f;return new r(n/(t*n-e*i),e/(e*i-t*n),i/(e*i-t*n),t/(t*n-e*i),(n*s-i*a)/(e*i-t*n),(e*s-t*a)/(t*n-e*i))}translate(t=0,e){return new r(this.a,this.b,this.c,this.d,this.e+this.a*t+this.c*e,this.f+this.b*t+this.d*e)}rotate(t,e=0,i=0){let n=Math.cos(t),s=Math.sin(t);return this.translate(e,i).multiply(new r(n,s,-s,n,0,0)).translate(-e,-i)}scale(t,e,i=0,n=0){return null==e&&(e=t),this.translate(i,n).multiply(new r(t,0,0,e,0,0)).translate(-i,-n)}equals(t){return t.a==this.a&&t.b==this.b&&t.c==this.c&&t.d==this.d&&t.e==this.e&&t.f==this.f}}r.identity=new r(1,0,0,1,0,0),e.exports=r},{}],7:[function(t,e,i){"use strict";const r=t("./matrix.js");class n{constructor(t,e,i,r){this.appearance=t,this.x=e,this.y=i,this.atom=r}}class s{constructor(t,e){this.appearance=e;let i=t.split(",");this.x=+i[0],this.y=+i[1],this.z=+i[2],this.ref=t,this.loc=t}}class a{constructor(t,e,i,r){this.appearance=e,this.loc=t,this.last_loc=t,this.last_move=i,this.ref=r}}class o{constructor(t,e){console.log(t),this.demo=t,this.icons=e,document.body.innerHTML="",this.main_panel=document.createElement("div"),document.body.appendChild(this.main_panel),this.main_panel.classList.add("main_panel"),this.canvas=document.createElement("canvas"),this.main_panel.appendChild(this.canvas),this.canvas.classList.add("fill_canvas"),this.canvas.tabIndex=0,this.canvas.addEventListener("mousedown",this.canvas_mousedown.bind(this)),this.canvas.addEventListener("wheel",this.canvas_wheel.bind(this)),this.canvas.addEventListener("dblclick",this.canvas_dblclick.bind(this)),document.addEventListener("keydown",this.keydown.bind(this)),document.addEventListener("click",this.click.bind(this)),this.right_panel=document.createElement("div"),document.body.appendChild(this.right_panel),this.right_panel.classList.add("right_panel");let i=document.createElement("div");i.classList.add("controls"),this.right_panel.appendChild(i),this.scrub_slider=document.createElement("input"),this.scrub_slider.type="range",this.scrub_slider.min=0,this.scrub_slider.step=0,this.scrub_slider.max=this.demo.duration,this.scrub_slider.classList.add("scrub_slider"),i.appendChild(this.scrub_slider),this.scrub_slider.addEventListener("input",this.scrub.bind(this)),this.time_display=document.createElement("div"),i.appendChild(this.time_display),this.rewind_button=document.createElement("input"),this.rewind_button.type="button",this.rewind_button.value="Rewind",this.rewind_button.addEventListener("click",()=>{this.playback_speed=-3}),i.appendChild(this.rewind_button),this.play_button=document.createElement("input"),this.play_button.type="button",this.play_button.value="Pause/Play",this.play_button.addEventListener("click",()=>{this.playback_speed=0==this.playback_speed?1:0}),i.appendChild(this.play_button),this.fastfoward_button=document.createElement("input"),this.fastfoward_button.type="button",this.fastfoward_button.value="Fast-foward",this.fastfoward_button.addEventListener("click",()=>{this.playback_speed=5}),i.appendChild(this.fastfoward_button),this.inspector_button=document.createElement("input"),this.inspector_button.id="inspector_checkbox",this.inspector_button.type="checkbox",this.inspector_button.addEventListener("click",()=>{this.should_update_inspector=this.inspector_button.checked}),i.appendChild(this.inspector_button),this.inspector_label=document.createElement("label"),this.inspector_label.innerHTML="Show contents",this.inspector_label.setAttribute("for","inspector_checkbox"),i.appendChild(this.inspector_label),this.inspect_table=document.createElement("div"),this.inspect_table.classList.add("inspect_table"),this.right_panel.appendChild(this.inspect_table),this.inspect_elem=document.createElement("div");let r=document.createElement("div");r.textContent="Clients:",this.client_list_elem=document.createElement("div"),this.inspect_table.appendChild(this.inspect_elem),this.inspect_table.appendChild(r),this.inspect_table.appendChild(this.client_list_elem),this.chat_window=document.createElement("div"),this.chat_window.classList.add("chat_window"),this.chat_window.addEventListener("scroll",()=>{this.is_chat_scrolled_to_bottom=Math.ceil(this.chat_window.clientHeight+this.chat_window.scrollTop)>=Math.floor(this.chat_window.scrollHeight)}),this.right_panel.appendChild(this.chat_window),this.last_timestamp=null,this.turf_grid=[],this.object_ref_list=[],this.clients=new Set,this.client_mobs=new Map;for(let e of t.init_objs)this.set_object(e.ref,new a(e.loc,e.appearance,0,e.ref));for(let e=1;e<=t.maxz;e++)for(let t=0;t<this.demo.init_turfs[e-1].length;t++){let i=`${t%this.demo.maxx+1},${Math.floor(t/this.demo.maxy)+1},${e}`;this.set_object(i,new s(i,this.demo.init_turfs[e-1][t]))}this.should_update_inspector=!1,this.playhead=-1,this.timeframe_index=-1,this.playback_speed=1,this.follow_desc=null,this.inspect_desc=null,this.see_invisible=60,this.mapwindow_x=t.maxx/2,this.mapwindow_y=t.maxy/2,this.mapwindow_z=2,this.mapwindow_zoom=1,this.mapwindow_log_zoom=0,this.is_chat_scrolled_to_bottom=!0,this.advance_playhead(0),this.update_from_hash(),window.addEventListener("hashchange",this.update_from_hash.bind(this)),this.init_rendering(),window.requestAnimationFrame(this.animation_frame_callback.bind(this))}fix_chat_message(t){let e="";for(var i=0;i<t.length;i++){let r=t.charCodeAt(i);r>=192&&r<=255?e+=String.fromCharCode(r+848):e+=182!=r?t.charAt(i):String.fromCharCode(1103)}return e}add_chat(t,e){if(!t.clients.includes(this.follow_desc)&&!t.clients.includes("world"))return;let i=document.createElement("div");i.dataset.index=e,i.innerHTML=this.fix_chat_message(t.message),this.chat_window.appendChild(i)}reset_chat(){this.chat_window.innerHTML="";for(let t=0;t<=this.timeframe_index;t++){let e=this.demo.timeframes[t];for(let i of e.chat)this.add_chat(i,t)}this.chat_window.scrollTop=this.chat_window.scrollHeight-this.chat_window.clientHeight}advance_playhead(t){if(t<0?(t=0,this.playback_speed<0&&(this.playback_speed=0)):t>this.demo.duration&&(t=this.demo.duration,this.playback_speed>0&&(this.playback_speed=0)),t>this.playhead)for(;this.demo.timeframes[this.timeframe_index+1]&&this.demo.timeframes[this.timeframe_index+1].time<=t;){this.timeframe_index++;let t=this.demo.timeframes[this.timeframe_index];this.apply_timeframe(t,t.forward);for(let e of t.chat)this.add_chat(e,this.timeframe_index)}else if(t<this.playhead){for(;this.demo.timeframes[this.timeframe_index]&&this.demo.timeframes[this.timeframe_index].time>t;){let t=this.demo.timeframes[this.timeframe_index];this.apply_timeframe(t,t.backward),this.timeframe_index--}for(let t=this.chat_window.children.length-1;t>=0;t--){let e=this.chat_window.children[t];e.dataset.index>this.timeframe_index&&this.chat_window.removeChild(e)}}this.playhead=t,this.scrub_slider.value=this.playhead,this.time_display.textContent=l(Math.round(this.playhead/10))+" / "+l(Math.round(this.demo.duration/10));for(let[t,e]of this.client_mobs){let i=this.client_list_elem.querySelector(`[data-ckey=${JSON.stringify(t)}] .mob_span`);if(i){let t=this.get_object(e);t&&t.appearance?i.textContent=t.appearance.name:i.textContent="?"}}this.is_chat_scrolled_to_bottom&&(this.chat_window.scrollTop=this.chat_window.scrollHeight-this.chat_window.clientHeight)}apply_timeframe(t,e){for(let t of e.del_atoms)this.set_object(t,void 0);for(let t of e.change_atoms){let e=this.get_object(t.ref);e&&(e.appearance=t.appearance,e.loc=t.loc,e.last_loc=t.last_loc,e.last_move=t.last_move,e.loc&&"["!=e.loc[0]&&!this.get_object(e.loc)&&this.set_object(e.loc,new s(e.loc)))}for(let t of e.add_atoms){let e=new a(t.loc,t.appearance,0,t.ref);e.last_loc=t.last_loc,e.last_move=t.last_move,this.set_object(t.ref,e),t.loc&&"["!=t.loc[0]&&!this.get_object(t.loc)&&this.set_object(t.loc,new s(t.loc))}for(let t of e.turf_changes){let e=this.get_object(t.loc);e instanceof s?e.appearance=t.appearance:null==e&&(e=new s(t.loc,t.appearance),this.set_object(t.loc,e))}for(let t of e.login){this.clients.add(t);let e=this.client_list_elem.querySelector(`[data-ckey=${JSON.stringify(t)}]`);if(!e){e=document.createElement("div"),e.dataset.ckey=t;let i=document.createElement("input");i.dataset.follow=t,i.type="button",i.value="FLW",e.appendChild(i);let r=document.createElement("span");r.classList.add("ckey_span"),r.textContent=t,e.appendChild(r),e.appendChild(document.createTextNode("("));let n=document.createElement("span");n.classList.add("mob_span");let s=this.client_mobs.get(t);if(n.textContent="?",s){let t=this.get_object(s);t&&t.appearance&&(n.textContent=t.appearance.name)}e.appendChild(n),e.appendChild(document.createTextNode(")")),this.client_list_elem.appendChild(e)}}for(let t of e.logout){this.clients.delete(t);let e=this.client_list_elem.querySelector(`[data-ckey=${JSON.stringify(t)}]`);e&&this.client_list_elem.removeChild(e)}for(let t of e.setmob)this.client_mobs.set(t.ckey,t.ref)}click(t){let e=t.target;e.dataset.follow&&(this.follow_desc=e.dataset.follow,this.reset_chat()),e.dataset.inspect&&(this.inspect_desc=e.dataset.inspect,this.clients.has(this.inspect_desc)&&(this.inspect_desc=this.client_mobs.get(this.inspect_desc)),this.inspect_elem.scrollTop=0)}scrub(){this.advance_playhead(+this.scrub_slider.value)}update_from_hash(t){let e=window.location.hash||"";if("#"==e[0]&&(e=e.substring(1)),t&&t.newURL.includes("#")&&(e=t.newURL.substring(t.newURL.indexOf("#")+1)),e.length){let t,i=e.split(";");i[0]==+i[0]&&this.advance_playhead(+i[0]),i[1]==+i[1]&&(this.mapwindow_x=+i[1]),i[2]==+i[2]&&(this.mapwindow_y=+i[2]),i[3]==+i[3]&&(this.mapwindow_z=Math.round(+i[3])),"null"==i[4]?t=null:i[4]&&(t=i[4]),t!=this.follow_desc&&(this.follow_desc=t,this.reset_chat())}}frame(t){let e=this.last_timestamp?t-this.last_timestamp:0;this.last_timestamp=t,0!=this.playback_speed&&this.advance_playhead(this.playhead+e*this.playback_speed/100);let i=this.canvas.getBoundingClientRect();this.canvas.width!=i.width&&(this.canvas.width=i.width),this.canvas.height!=i.height&&(this.canvas.height=i.height);let o=this.canvas.getContext("2d"),l=null,h=null;if(this.follow_desc&&(l=this.get_object(this.follow_desc),!l&&this.clients.has(this.follow_desc)?l=this.get_object(this.client_mobs.get(this.follow_desc)):l||(this.follow_desc=null,this.reset_chat()),l)){for(;l&&l.loc&&"["==l.loc[0];)l=this.get_object(l.loc);if(l instanceof a&&null==l.loc)return void o.clearRect(0,0,this.canvas.width,this.canvas.height);h=l instanceof s?l:this.get_object(l.loc)}h&&(this.mapwindow_z=h.z||2,this.mapwindow_x=(h.x||128)+.5,this.mapwindow_y=(h.y||128)+.5);let u=[];if(this.turf_grid[this.mapwindow_z-1])for(let t of this.turf_grid[this.mapwindow_z-1])if(t)for(let e of t)e&&u.push(new n(e.appearance,e.x,e.y,e));for(let t of this.object_ref_list)if(t){for(let e of t){if(!e)continue;let t,i=0,r=0,a=this.get_object(e.loc);if(!(a instanceof s))continue;t=a;let o=32/8*.5;if(this.playhead-e.last_move<o){let t=this.get_object(e.last_loc);if(t instanceof s&&t.z==a.z){let n=a.x-t.x,s=a.y-t.y,l=(this.playhead-e.last_move)/o;Math.abs(n)<=1&&Math.abs(s)<=1&&(i-=Math.round(32*n*(1-l))/32,r-=Math.round(32*s*(1-l))/32)}}t&&t.z==this.mapwindow_z&&(l==e&&(this.mapwindow_x=t.x+i+.5,this.mapwindow_y=t.y+r+.5),u.push(new n(e.appearance,t.x+i,t.y+r,e)))}this.should_update_inspector&&this.update_inspector()}u=u.filter(t=>!(!t||!t.appearance||t.x>this.mapwindow_x+this.canvas.width/32/2/this.mapwindow_zoom+2||t.y>this.mapwindow_y+this.canvas.height/32/2/this.mapwindow_zoom+2||t.x<this.mapwindow_x-this.canvas.width/32/2/this.mapwindow_zoom-2||t.y<this.mapwindow_y-this.canvas.height/32/2/this.mapwindow_zoom-2)),u.sort((t,e)=>t.appearance.plane!=e.appearance.plane?t.appearance.plane-e.appearance.plane:t.appearance.layer!=e.appearance.layer?t.appearance.layer-e.appearance.layer:t.y!=e.y?t.y-e.y:0);const f=this.gl;let c=Math.max(f.canvas.width,this.canvas.width),d=Math.max(f.canvas.height,this.canvas.height);c==f.canvas.width&&d==f.canvas.height||(f.canvas.width=c,f.canvas.height=d),f.viewport(0,0,this.canvas.width,this.canvas.height),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),this.gl_viewport=[this.canvas.width,this.canvas.height];let p=new r(this.mapwindow_zoom,0,0,this.mapwindow_zoom,-Math.round(this.mapwindow_x*this.mapwindow_zoom*32)+(this.canvas.width%2==1?.5:0),-Math.round(this.mapwindow_y*this.mapwindow_zoom*32)+(this.canvas.height%2==1?.5:0));for(let t of u)this.draw_appearance(p.translate(32*t.x,32*t.y),t.appearance,null,t.atom);this.gl_current_batch&&this.gl_current_batch.draw(),o.globalCompositeOperation="copy",o.drawImage(f.canvas,0,this.canvas.height-f.canvas.height);let _=`#${Math.round(this.playhead)};${this.mapwindow_x.toFixed(2)};${this.mapwindow_y.toFixed(2)};${Math.round(this.mapwindow_z)};${this.follow_desc}`;_!=window.location.hash&&history.replaceState("","",_)}update_inspector(){this.inspect_desc=this.follow_desc,this.clients.has(this.inspect_desc)&&(this.inspect_desc=this.client_mobs.get(this.inspect_desc));let t=this.get_object(this.inspect_desc);if(t||(this.inspect_desc=null),this.inspect_elem.dataset.inspecting!=this.inspect_desc){if(this.inspect_elem.dataset.inspecting=this.inspect_desc,this.inspect_elem.innerHTML="",null==this.inspect_desc)return;{let e=document.createElement("div");e.textContent="Inspecting:";let i=document.createElement("div");i.classList.add("inspect_self");let r=document.createElement("div");r.textContent="Loc:";let n=document.createElement("div");n.classList.add("inspect_parent");let a=document.createElement("div");a.textContent="Contents:";let o=document.createElement("div");o.classList.add("inspect_contents"),t instanceof s||(this.inspect_elem.appendChild(r),this.inspect_elem.appendChild(n)),this.inspect_elem.appendChild(e),this.inspect_elem.appendChild(i),this.inspect_elem.appendChild(a),this.inspect_elem.appendChild(o),i.style.paddingLeft="15px",e.style.paddingLeft="15px",o.style.paddingLeft="30px",a.style.paddingLeft="30px"}}if(null==this.inspect_desc)return;let e=this.inspect_elem.querySelector(".inspect_self"),i=this.inspect_elem.querySelector(".inspect_parent"),n=this.inspect_elem.querySelector(".inspect_contents"),a=[];a.push([e,t]),t instanceof s||a.push([i,this.get_object(t.loc)]);let o=new Set;for(let t of this.object_ref_list)if(t)for(let e of t){if(!e||e.loc!=this.inspect_desc)continue;o.add(e.ref);let t=n.querySelector("div[data-ref="+JSON.stringify(e.ref)+"]");t||(t=document.createElement("div"),n.appendChild(t),t.dataset.ref=e.ref),a.push([t,e])}for(let t=n.children.length-1;t>=0;t--)o.has(n.children[t].dataset.ref)||n.removeChild(n.children[t]);for(let[t,e]of a)if(t.classList.contains("inspect_exists")&&null==e)t.classList.remove("inspect_exists"),t.innerHTML="null";else if(e){let i,r;if(t.classList.contains("inspect_exists"))i=t.querySelector(".label"),r=t.querySelector(".follow_ckey");else{t.classList.add("inspect_exists"),t.innerHTML="";let n=document.createElement("canvas");n.width=32,n.height=32,t.appendChild(n);let s=document.createElement("input");s.dataset.follow=e.ref,s.type="button",s.value="FLW",r=document.createElement("input"),r.dataset.follow=null,r.type="button",r.style.display="none",r.value="FLW CKEY",r.classList.add("follow_ckey"),t.appendChild(s),t.appendChild(r),i=document.createElement("span"),i.classList.add("label"),t.appendChild(i)}i.textContent=e.appearance?e.appearance.name:null;let n=!1;for(let t of this.clients)if(this.client_mobs.get(t)==e.ref){r.dataset.follow=t,n=!0;break}r.style.display=n?"inline-block":"none"}for(let[t,e]of a){if(null==e)continue;let i=t.querySelector("canvas");if(null==i)continue;const n=this.gl;let s=Math.max(n.canvas.width,i.width),a=Math.max(n.canvas.height,i.height);s==n.canvas.width&&a==n.canvas.height||(n.canvas.width=s,n.canvas.height=a),n.viewport(0,0,i.width,i.height),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),this.gl_viewport=[i.width,i.height];let o=new r(1,0,0,1,-16,-16);this.draw_appearance(o,e.appearance,null,e),this.gl_current_batch&&this.gl_current_batch.draw();let l=i.getContext("2d");l.globalCompositeOperation="copy",l.drawImage(n.canvas,0,i.height-n.canvas.height)}}canvas_mousedown(t){if(2!=t.button){let e=t,i=()=>{document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",r)},r=t=>{this.mapwindow_x-=(t.screenX-e.screenX)/32/this.mapwindow_zoom*devicePixelRatio,this.mapwindow_y+=(t.screenY-e.screenY)/32/this.mapwindow_zoom*devicePixelRatio,this.mapwindow_x<1&&(this.mapwindow_x=1),this.mapwindow_y<1&&(this.mapwindow_y=1),this.mapwindow_x>this.demo.maxx&&(this.mapwindow_x=this.demo.maxx),this.mapwindow_y>this.demo.maxy&&(this.mapwindow_y=this.demo.maxy),e=t,this.follow_desc&&(this.follow_desc=null,this.reset_chat())};document.addEventListener("mouseup",i),document.addEventListener("mousemove",r),t.preventDefault()}}canvas_dblclick(t){let e=Math.floor((t.offsetX*devicePixelRatio-this.canvas.width/2)/this.mapwindow_zoom/32+this.mapwindow_x),i=Math.floor(-(t.offsetY*devicePixelRatio-this.canvas.height/2)/this.mapwindow_zoom/32+this.mapwindow_y),r=this.mapwindow_z;this.follow_desc=`${e},${i},${r}`}keydown(t){this.canvas.focus(),"PageDown"==t.code?this.mapwindow_z=Math.max(this.mapwindow_z-1,1):"PageUp"==t.code?this.mapwindow_z=Math.min(this.mapwindow_z+1,this.demo.maxz):"Space"==t.code?(t.shiftKey?this.playback_speed=5!=this.playback_speed?5:1:t.ctrlKey?this.playback_speed=-3!=this.playback_speed?-3:1:this.playback_speed=0==this.playback_speed?1:0,t.preventDefault()):"ArrowLeft"==t.code?this.advance_playhead(this.playhead-50):"ArrowRight"==t.code&&this.advance_playhead(this.playhead+50)}canvas_wheel(t){this.mapwindow_log_zoom-=Math.max(-1,Math.min(1,t.deltaY/100)),this.mapwindow_log_zoom=Math.max(-5,Math.min(5,this.mapwindow_log_zoom)),this.mapwindow_zoom=2**Math.round(this.mapwindow_log_zoom),t.preventDefault()}animation_frame_callback(t){try{this.frame(t)}catch(t){console.error(t)}window.requestAnimationFrame(this.animation_frame_callback.bind(this))}get_object(t){if(null!=t)if("["==t[0]){let e=parseInt(t.substring(1)),i=e>>24,r=16777215&e,n=this.object_ref_list[i];if(n)return n[r]}else{let e=t.indexOf(","),i=t.indexOf(",",e+1),r=+t.substring(0,e),n=+t.substring(e+1,i),s=+t.substring(i+1),a=this.turf_grid[s-1];if(a){let t=a[n-1];if(t)return t[r-1]}}}set_object(t,e){if(null!=t)if("["==t[0]){let i=parseInt(t.substring(1)),r=i>>24,n=16777215&i,s=this.object_ref_list[r];s||(this.object_ref_list[r]=s=[]),s[n]=e}else{let i=t.split(","),r=+i[0],n=+i[1],s=+i[2],a=this.turf_grid[s-1];a||(this.turf_grid[s-1]=a=[]);let o=a[n-1];o||(a[n-1]=o=[]),o[r-1]=e}}}function l(t){let e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),r=t-3600*e-60*i;return`${e}`.padStart(2,0)+":"+`${i}`.padStart(2,0)+":"+`${r}`.padStart(2,0)}Object.assign(o.prototype,t("./renderer.js")),e.exports=o},{"./matrix.js":6,"./renderer.js":8}],8:[function(t,e,i){"use strict";const r=t("./draw_batch.js"),n=t("color-parser"),s=t("./matrix.js"),a=[[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[3,3,3,3,12,3,3,3,12,3,3,3,12,3,3,3],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,1,2,2,4,4,2,4,8,8,8,4,1,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[3,3,3,3,12,5,6,12,12,9,10,12,12,3,3,3],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,1,2,2,4,5,6,4,8,9,10,8,4,1,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[3,3,3,3,12,5,6,7,12,9,10,11,12,13,14,15],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]];e.exports={init_rendering:function(){this.gl=document.createElement("canvas").getContext("webgl");const t=this.gl;this.max_icons_per_batch=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),256);let e=function t(e,i){if(0==i)return"";if(1==i)return`color *= texture2D(u_texture[${e}], v_uv);`;{let r=Math.ceil(i/2);return`if(v_tex_index < ${r+e}.0){${t(e,r)}}else{${t(e+r,i-r)}}`}}(0,this.max_icons_per_batch);this.shader_default=this.compile_shader_program("\nprecision mediump float;\nattribute vec2 a_position;\nattribute vec4 a_color;\nvarying vec4 v_color;\nattribute vec2 a_uv;\nvarying vec2 v_uv;\nattribute float a_tex_index;\nvarying float v_tex_index;\nuniform vec2 u_viewport_size;\nvoid main() {\n\tv_color = a_color;\n\tv_uv = a_uv;\n\tv_tex_index = a_tex_index;\n\tgl_Position = vec4(a_position / u_viewport_size * 2.0, 0.0, 1.0);\n}\n",`\nprecision mediump float;\nuniform sampler2D u_texture[${this.max_icons_per_batch}];\nvarying vec4 v_color;\nvarying vec2 v_uv;\nvarying float v_tex_index;\nuniform vec2 u_viewport_size;\nvoid main() {     // fucking shit why is there no bitwise and\n\tvec4 color = v_color;\n\t${e}\n\tgl_FragColor = color;\n}\n`),this.gl_viewport=[32,32],this.gl_current_batch=null,this.gl_texture_cache=new Map,this.gl_uniform_cache=new Map,this.gl_uniform_cache.set(this.shader_default,{u_viewport_size:t.getUniformLocation(this.shader_default,"u_viewport_size"),u_viewport_tile_size:t.getUniformLocation(this.shader_default,"u_viewport_tile_size"),u_world_origin:t.getUniformLocation(this.shader_default,"u_world_origin")}),this.gl_white_texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.gl_white_texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([255,255,255,255])),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)},compile_shader:function(t,e){const i=this.gl;let r=i.createShader(e);if(i.shaderSource(r,t),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS))throw new Error((e==i.VERTEX_SHADER?"VERTEX SHADER ":"FRAGMENT SHADER ")+i.getShaderInfoLog(r));return r},compile_shader_program:function(t,e){const i=this.gl;let r=i.createProgram();if(i.attachShader(r,this.compile_shader(t,i.VERTEX_SHADER)),i.attachShader(r,this.compile_shader(e,i.FRAGMENT_SHADER)),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw new Error(i.getProgramInfoLog(r));return r},get_texture:function(t){const e=this.gl;if(this.gl_texture_cache.has(t))return this.gl_texture_cache.get(t);if(this.icons.has(t)){let i=this.icons.get(t).image;if(!i||!i.complete)return this.gl_white_texture;let r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.gl_texture_cache.set(t,r),r}return this.gl_white_texture},draw_appearance:function(t,e,i=null,o,l=t){if(15==e.plane)return;if(e.invisibility>this.see_invisible)return;let h={color:e.color,dir:e.dir,alpha:e.alpha};i&&(0==h.dir&&(h.dir=i.dir),4&e.appearance_flags||(h.alpha*=i.alpha/255),2&e.appearance_flags||(!h.color||"string"==typeof h.color&&"#ffffff"==h.color.toLowerCase())&&(h.color=i.color)),8&e.appearance_flags&&(t=l),t=t.translate(e.pixel_x,e.pixel_y),e.transform&&(t=1==e.transform[0]&&0==e.transform[1]&&0==e.transform[3]&&1==e.transform[4]?t.translate(e.transform[2],e.transform[5]):t.translate(16,16).multiply(new s(e.transform[0],e.transform[3],e.transform[1],e.transform[4],e.transform[2],e.transform[5])).translate(-16,-16));for(let i of e.underlays)this.draw_appearance(t,i,h,o,l);let u=this.icons.get(e.icon);if(u){let i=e.icon_state;"?"==i&&"icons/turf/space.dmi"==e.icon&&(i=`${((o.x+o.y^~(o.x*o.y)+o.z)%25+25)%25}`);let s=u.icon_states.get(i)||u.icon_states.get(" ")||u.icon_states.get("");if(s){let i=null,o=a[s.dir_count]||a[1];if(i=s.dirs.get(o[h.dir])||s.dirs.get(2),i){let a=this.playhead%i.total_delay,o=0,l=0;for(let t=0;t<i.frames.length;t++)if(l+=i.frames[t].delay,l>a){o=t;break}let f=i.frames[o>=0&&o<i.frames.length?o:0];this.gl_current_batch&&this.gl_current_batch.constructor==r&&this.gl_current_batch.can_fit(6,e.icon)||(this.gl_current_batch&&this.gl_current_batch.draw(),this.gl_current_batch&&this.gl_current_batch.constructor==r||(this.gl_current_batch=new r(this)));let c=this.gl_current_batch,d=u.image,p=1/d.width,_=1/d.height,g=c.icon_list.indexOf(e.icon);-1==g&&(g=c.icon_list.length,c.icon_list.push(e.icon));let m=s.width,w=s.height,b=h.color&&"string"==typeof h.color?n(h.color):null,y=h.alpha/255;y=null==y?1:y;for(let e=0;e<2;e++)for(let i=0;i<3;i++){let r=e+i,n=1&r,s=(2&r)>>1,a=c.num_vertices;c.buffers.texture_indices.buf[a]=g;let o=t.multiply([n*m,s*w]);c.buffers.vertices.buf[a<<1]=o[0],c.buffers.vertices.buf[1+(a<<1)]=o[1],c.buffers.uv.buf[a<<1]=(f.x+n*m)*p,c.buffers.uv.buf[1+(a<<1)]=(f.y+(1-s)*w)*_,b?(c.buffers.colors.buf[a<<2]=b.r/255,c.buffers.colors.buf[1+(a<<2)]=b.g/255,c.buffers.colors.buf[2+(a<<2)]=b.b/255,c.buffers.colors.buf[3+(a<<2)]=b.a*y):(c.buffers.colors.buf[a<<2]=1,c.buffers.colors.buf[1+(a<<2)]=1,c.buffers.colors.buf[2+(a<<2)]=1,c.buffers.colors.buf[3+(a<<2)]=1*y),c.num_vertices++}}}}e.sorted_overlays||(e.sorted_overlays=[...e.overlays].sort((t,i)=>{let r=t.layer<0?e.layer:t.layer,n=i.layer<0?e.layer:i.layer;if(r<n)return r-n;let s=t.layer<0?t.layer:-1,a=i.layer<0?i.layer:-1;return s<a?s-a:0}));for(let i of e.sorted_overlays)this.draw_appearance(t,i,h,o,l)}}},{"./draw_batch.js":3,"./matrix.js":6,"color-parser":26}],9:[function(t,e,i){(function(i){"use strict";var r=t("object-assign");
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function n(t,e){if(t===e)return 0;for(var i=t.length,r=e.length,n=0,s=Math.min(i,r);n<s;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0}function s(t){return i.Buffer&&"function"==typeof i.Buffer.isBuffer?i.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=t("util/"),o=Object.prototype.hasOwnProperty,l=Array.prototype.slice,h="foo"===function(){}.name;function u(t){return Object.prototype.toString.call(t)}function f(t){return!s(t)&&("function"==typeof i.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var c=e.exports=w,d=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(a.isFunction(t)){if(h)return t.name;var e=t.toString().match(d);return e&&e[1]}}function _(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function g(t){if(h||!a.isFunction(t))return a.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function m(t,e,i,r,n){throw new c.AssertionError({message:i,actual:t,expected:e,operator:r,stackStartFunction:n})}function w(t,e){t||m(t,!0,e,"==",c.ok)}function b(t,e,i,r){if(t===e)return!0;if(s(t)&&s(e))return 0===n(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(f(t)&&f(e)&&u(t)===u(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===n(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(s(t)!==s(e))return!1;var o=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==o&&o===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),function(t,e,i,r){if(null==t||null==e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(i&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var n=y(t),s=y(e);if(n&&!s||!n&&s)return!1;if(n)return t=l.call(t),e=l.call(e),b(t,e,i);var o,h,u=E(t),f=E(e);if(u.length!==f.length)return!1;for(u.sort(),f.sort(),h=u.length-1;h>=0;h--)if(u[h]!==f[h])return!1;for(h=u.length-1;h>=0;h--)if(o=u[h],!b(t[o],e[o],i,r))return!1;return!0}(t,e,i,r))}return i?t===e:t==e}function y(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,i,r){var n;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(r=i,i=null),n=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(i&&i.name?" ("+i.name+").":".")+(r?" "+r:"."),t&&!n&&m(n,i,"Missing expected exception"+r);var s="string"==typeof r,o=!t&&n&&!i;if((!t&&a.isError(n)&&s&&v(n,i)||o)&&m(n,i,"Got unwanted exception"+r),t&&n&&i&&!v(n,i)||!t&&n)throw n}c.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return _(g(t.actual),128)+" "+t.operator+" "+_(g(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var i=new Error;if(i.stack){var r=i.stack,n=p(e),s=r.indexOf("\n"+n);if(s>=0){var a=r.indexOf("\n",s+1);r=r.substring(a+1)}this.stack=r}}},a.inherits(c.AssertionError,Error),c.fail=m,c.ok=w,c.equal=function(t,e,i){t!=e&&m(t,e,i,"==",c.equal)},c.notEqual=function(t,e,i){t==e&&m(t,e,i,"!=",c.notEqual)},c.deepEqual=function(t,e,i){b(t,e,!1)||m(t,e,i,"deepEqual",c.deepEqual)},c.deepStrictEqual=function(t,e,i){b(t,e,!0)||m(t,e,i,"deepStrictEqual",c.deepStrictEqual)},c.notDeepEqual=function(t,e,i){b(t,e,!1)&&m(t,e,i,"notDeepEqual",c.notDeepEqual)},c.notDeepStrictEqual=function t(e,i,r){b(e,i,!0)&&m(e,i,r,"notDeepStrictEqual",t)},c.strictEqual=function(t,e,i){t!==e&&m(t,e,i,"===",c.strictEqual)},c.notStrictEqual=function(t,e,i){t===e&&m(t,e,i,"!==",c.notStrictEqual)},c.throws=function(t,e,i){x(!0,t,e,i)},c.doesNotThrow=function(t,e,i){x(!1,t,e,i)},c.ifError=function(t){if(t)throw t},c.strict=r((function t(e,i){e||m(e,!0,i,"==",t)}),c,{equal:c.strictEqual,deepEqual:c.deepStrictEqual,notEqual:c.notStrictEqual,notDeepEqual:c.notDeepStrictEqual}),c.strict.strict=c.strict;var E=Object.keys||function(t){var e=[];for(var i in t)o.call(t,i)&&e.push(i);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":34,"util/":12}],10:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],11:[function(t,e,i){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],12:[function(t,e,i){(function(e,r){var n=/%[sdj%]/g;i.format=function(t){if(!m(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(o(arguments[i]));return e.join(" ")}i=1;for(var r=arguments,s=r.length,a=String(t).replace(n,(function(t){if("%%"===t)return"%";if(i>=s)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return t}})),l=r[i];i<s;l=r[++i])_(l)||!y(l)?a+=" "+l:a+=" "+o(l);return a},i.deprecate=function(t,n){if(w(r.process))return function(){return i.deprecate(t,n).apply(this,arguments)};if(!0===e.noDeprecation)return t;var s=!1;return function(){if(!s){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),s=!0}return t.apply(this,arguments)}};var s,a={};function o(t,e){var r={seen:[],stylize:h};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(e)?r.showHidden=e:e&&i._extend(r,e),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),u(r,t,r.depth)}function l(t,e){var i=o.styles[e];return i?"["+o.colors[i][0]+"m"+t+"["+o.colors[i][1]+"m":t}function h(t,e){return t}function u(t,e,r){if(t.customInspect&&e&&E(e.inspect)&&e.inspect!==i.inspect&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(r,t);return m(n)||(n=u(t,n,r)),n}var s=function(t,e){if(w(e))return t.stylize("undefined","undefined");if(m(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(g(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(_(e))return t.stylize("null","null")}(t,e);if(s)return s;var a=Object.keys(e),o=function(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),x(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(e);if(0===a.length){if(E(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(b(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(v(e))return t.stylize(Date.prototype.toString.call(e),"date");if(x(e))return f(e)}var h,y="",k=!1,S=["{","}"];(d(e)&&(k=!0,S=["[","]"]),E(e))&&(y=" [Function"+(e.name?": "+e.name:"")+"]");return b(e)&&(y=" "+RegExp.prototype.toString.call(e)),v(e)&&(y=" "+Date.prototype.toUTCString.call(e)),x(e)&&(y=" "+f(e)),0!==a.length||k&&0!=e.length?r<0?b(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),h=k?function(t,e,i,r,n){for(var s=[],a=0,o=e.length;a<o;++a)j(e,String(a))?s.push(c(t,e,i,r,String(a),!0)):s.push("");return n.forEach((function(n){n.match(/^\d+$/)||s.push(c(t,e,i,r,n,!0))})),s}(t,e,r,o,a):a.map((function(i){return c(t,e,r,o,i,k)})),t.seen.pop(),function(t,e,i){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(h,y,S)):S[0]+y+S[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,i,r,n,s){var a,o,l;if((l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?o=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(o=t.stylize("[Setter]","special")),j(r,n)||(a="["+n+"]"),o||(t.seen.indexOf(l.value)<0?(o=_(i)?u(t,l.value,null):u(t,l.value,i-1)).indexOf("\n")>-1&&(o=s?o.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+o.split("\n").map((function(t){return"   "+t})).join("\n")):o=t.stylize("[Circular]","special")),w(a)){if(s&&n.match(/^\d+$/))return o;(a=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+o}function d(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function _(t){return null===t}function g(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return void 0===t}function b(t){return y(t)&&"[object RegExp]"===k(t)}function y(t){return"object"==typeof t&&null!==t}function v(t){return y(t)&&"[object Date]"===k(t)}function x(t){return y(t)&&("[object Error]"===k(t)||t instanceof Error)}function E(t){return"function"==typeof t}function k(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}i.debuglog=function(t){if(w(s)&&(s=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(s)){var r=e.pid;a[t]=function(){var e=i.format.apply(i,arguments);console.error("%s %d: %s",t,r,e)}}else a[t]=function(){};return a[t]},i.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=d,i.isBoolean=p,i.isNull=_,i.isNullOrUndefined=function(t){return null==t},i.isNumber=g,i.isString=m,i.isSymbol=function(t){return"symbol"==typeof t},i.isUndefined=w,i.isRegExp=b,i.isObject=y,i.isDate=v,i.isError=x,i.isFunction=E,i.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},i.isBuffer=t("./support/isBuffer");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),T[t.getMonth()],e].join(" ")}function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}i.log=function(){console.log("%s - %s",I(),i.format.apply(i,arguments))},i.inherits=t("inherits"),i._extend=function(t,e){if(!e||!y(e))return t;for(var i=Object.keys(e),r=i.length;r--;)t[i[r]]=e[i[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":11,_process:47,inherits:10}],13:[function(t,e,i){"use strict";i.byteLength=function(t){var e=h(t),i=e[0],r=e[1];return 3*(i+r)/4-r},i.toByteArray=function(t){var e,i,r=h(t),a=r[0],o=r[1],l=new s(function(t,e,i){return 3*(e+i)/4-i}(0,a,o)),u=0,f=o>0?a-4:a;for(i=0;i<f;i+=4)e=n[t.charCodeAt(i)]<<18|n[t.charCodeAt(i+1)]<<12|n[t.charCodeAt(i+2)]<<6|n[t.charCodeAt(i+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;2===o&&(e=n[t.charCodeAt(i)]<<2|n[t.charCodeAt(i+1)]>>4,l[u++]=255&e);1===o&&(e=n[t.charCodeAt(i)]<<10|n[t.charCodeAt(i+1)]<<4|n[t.charCodeAt(i+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e);return l},i.fromByteArray=function(t){for(var e,i=t.length,n=i%3,s=[],a=0,o=i-n;a<o;a+=16383)s.push(u(t,a,a+16383>o?o:a+16383));1===n?(e=t[i-1],s.push(r[e>>2]+r[e<<4&63]+"==")):2===n&&(e=(t[i-2]<<8)+t[i-1],s.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return s.join("")};for(var r=[],n=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=a.length;o<l;++o)r[o]=a[o],n[a.charCodeAt(o)]=o;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function u(t,e,i){for(var n,s,a=[],o=e;o<i;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(r[(s=n)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],14:[function(t,e,i){var r=t("./lib/buffer.js"),n=t("stream").Stream,s=t("util");function a(t,e){if(!(this instanceof a))return new a(t,e);e=e||{},this._buffer=new r(0),t&&this.write(t),this.writable=!0,this.setEndian(e.endian||"BE"),this._offset=0}s.inherits(a,n),a.interpretEndian=function(t){return t.match(/^(le|little)$/i)?"LE":t.match(/^(be|big)$/i)?"BE":null},a.prototype.setEndian=function(t){var e;if(e=a.interpretEndian(t))return this.endianness=e,this;throw new TypeError(s.format("Unrecognized input: %s. Acceptable inputs are: [LE, little, BE, big]",t))},a.prototype.write=function(t){var e=r.isBuffer(t)?t:r(t.toString()),i=this._buffer,n=e.length+i.length;return this._buffer=r.concat([i,e],n),this.emit("data",t),this},a.prototype.end=function(t){return t&&this.write(t),this.emit("end",t),this},a.prototype.eat=function(t,e){var i,r,n,o,l,h;if(e=e||{},t=t||1,(i=this._offset)>=(h=(l=this._buffer).length))return null;if(r=i,(n=i+t)>=h&&(n=h,this.emit("empty")),o=l.slice(r,n),this._offset=n,0===o.length)return null;if(e.integer){var u,f="readInt",c=this.endianness;if(!~[1,2,4].indexOf(t))throw new RangeError(s.format("Invalid value for amount `%s` when `opts.integer` is true, valid values are [1, 2, 4]",t));if(e.endian)if(!(c=a.interpretEndian(e.endian)))throw new TypeError(s.format("Invalid value for `opts.endian` %s",e.endian));return!1===e.signed&&(f="readUInt"),u=f+8*t,t>1&&(u+=c),o[u](0)}return o},a.prototype.eatInt=function(t,e){return this.eat(t,{integer:!0,signed:!0,endian:e})},a.prototype.eatUInt=function(t,e){return this.eat(t,{integer:!0,signed:!1,endian:e})},a.prototype.eatBool=function(){return!!this.eatUInt(1)},a.prototype.eats=function(t){var e=this.eat(t);return e?e.toString():null},a.prototype.rewind=function(t){return t||(t=this.position()),this._offset-=t,this},a.prototype.position=function(){return this._offset},a.prototype.peak=function(t){var e=this.eat.apply(this,arguments);return this.rewind(t),e},a.prototype.peaks=function(t){var e=this.peak(t);return e?e.toString():null},a.prototype.eatString=function(t){var e,i,r,n,a=s.format("Separator must be a number between [0, 255] or a single character, got %s",t),o=new TypeError(a),l=new RangeError(a);if(e=this._buffer,void 0===t)t=0;else if("string"==typeof t&&1===t.length)t=t.charCodeAt(0);else if(isNaN(t))throw o;if(t<0||t>255)throw l;for(i=this._offset;(n=this.eat())&&n[0]!==t;);return i===(r=this._offset)?null:(r!==e.length&&(r-=1),e.slice(i,r).toString())},a.prototype.eatRemaining=function(t){var e,i,r;if(t=t||{},e=this._buffer,i=this._offset,!t.chunkSize)return r=e.slice(i,e.length),this._offset=e.length,0===r.length?null:r;for(var n=[];r=this.eat(t.chunkSize,t);)n.push(r);return n},a.prototype.eatRest=a.prototype.eatRemaining,a.prototype.getBuffer=function(){return this._buffer},a.prototype.remaining=function(){return this.getBuffer().length-this.position()},e.exports=a},{"./lib/buffer.js":15,stream:63,util:97}],15:[function(t,e,i){var r=t("buffer").Buffer;r.concat=r.concat||function(t,e){if(!Array.isArray(t))throw new Error("Usage: Buffer.concat(list, [length])");if(0===t.length)return new r(0);if(1===t.length)return t[0];if("number"!=typeof e){e=0;for(var i=0;i<t.length;i++){e+=(a=t[i]).length}}var n=new r(e),s=0;for(i=0;i<t.length;i++){var a;(a=t[i]).copy(n,s),s+=a.length}return n},e.exports=r},{buffer:24}],16:[function(t,e,i){var r=t("util"),n=t("./lib/errors.js"),s=t("./lib/range.js"),a=t("./lib/buffer.js"),o=a.prototype;function l(t,e){if(!(this instanceof l))return new l(t,e);this.initialize.apply(this,arguments)}r.inherits(l,a),l.getSize=function(t){var e=l.RANGE;return e[8].test(t)?8:e[16].test(t)?16:e[32].test(t)?32:void 0},l.prototype.initialize=function(t,e){if(this._pos=0,this._endianness=e||"BE",this._generateMethodTable(),"string"==typeof t)return this.setupBuffer(t.length),this.write(t),this;if(r.isArray(t)){var i=t.map((function(t){var e={};return"number"==typeof t?(e.value=t,e.width=l.getSize(t)):e=t,e})),n=i.reduce((function(t,e){return t+e.width/8}),0);return this.setupBuffer(n),i.forEach(function(t){this.writeInt.call(this,t)}.bind(this)),this}this.setupBuffer(t)},l.prototype.setupBuffer=function(t,e){e=e||{fill:!0};var i=this._buffer=a(t);return e.fill&&i.fill(0),this.parent=i.parent,this.length=i.length,this.offset=i.offset,this.pool=i.pool,this._makeArrayLike(),this},l.prototype.out=function(){return this._buffer},l.prototype.write=function(t){if(r.isArray(t)||a.isBuffer(t))return this.writeRaw.apply(this,arguments);var e=t;return t.value&&(e=t.value),"string"==typeof e?this.writeString.apply(this,arguments):this.writeInt.apply(this,arguments)},l.prototype.writeInt=function(t,e){var i,r=l.RANGE[32],s=l.INT_SIZES;if("object"==typeof t&&t.value&&(t=(e=t).value),"string"==typeof t){if(!t.match(/^\d+$/))throw n.type(t,"integer");t=parseInt(t,10)}if(!r.test(t))throw n.range(t,r);if(e&&(e.size||e.width)){var a=e.size||e.width;if(!~s.indexOf(a))throw n.size(a,s);i=this._methods.bySize[t>0?"unsigned":"signed"][a]}else i=this._methods.filter((function(e){if(e.test(t))return e}))[0];if(!i)throw n.dispatch(t,e);var o=this.remaining();if(i.length>o)throw n.overflow(t,i.length,o);return i.method.call(this._buffer,t,this.position()),this.move(i.length),this},l.prototype.writeString=function(t,e){e||(e={}),"null"in e||(e.null=!0);var i=a(t),r=i.length;if(e.size){var s,o=e.size;return r>o?this.write(i.slice(0,o)):((s=a(o-r)).fill(0),this.write(a.concat([i,s])))}if(i.length>this.remaining())throw n.overflow(t,i.length,this.remaining());return this.write(i),!1!==e.null&&this.remaining()>0&&this.write(l.NULL_BYTE),this},l.prototype.writeRaw=function(t,e){if(a.isBuffer(t))return this._copyBuffer(t);if(e&&!0===e.safe){for(var i=0;i<t.length;i++)this.write8(t[i]);return this}var r=l.RANGE[8];for(i=0;i<t.length;i++){if("number"!=typeof t[i])throw n.arrayType(t,i);if(!r.test(t[i]))throw n.range(t[i],r)}return this.writeRaw(t,{safe:!0})},l.prototype.remaining=function(){return this.length-this._pos},l.prototype.attach=function(t,e){var i=l.prototype;return Object.keys(i).filter((function(t){return t.match(/^write/)})).forEach(function(e){var i=this[e].bind(this);t[e]=i}.bind(this)),e&&(t[e]=this),t},l.prototype.write8=function(t){return this.writeInt(t,{size:8})},l.prototype.write16=function(t){return this.writeInt(t,{size:16})},l.prototype.write32=function(t){return this.writeInt(t,{size:32})},l.prototype.full=function(){return 0===this.remaining()},l.prototype.position=function(t){var e=s(0,this.length);if(void 0!==t){if("number"!=typeof t)throw n.type(t,"Number");if(!e.test(t)||isNaN(t))throw n.range(t,e);return this._pos=t,this}return this._pos},l.prototype.reset=function(){return this._buffer.fill(0),this.position(0),this},l.prototype.move=function(t){if("number"!=typeof t)throw n.type(t,"Number");var e=this.position();return this.position(e+t)},l.prototype._copyBuffer=function(t){return t.copy(this,this.position()),this.move(t.length),this},l.prototype._generateMethodTable=function(){var t=this._endianness,e=l.UNSIGNED_RANGE,i=l.SIGNED_RANGE;this._methods=[{method:o.writeUInt8,length:1,test:e[8].test},{method:o["writeUInt16"+t],length:2,test:e[16].test},{method:o["writeUInt32"+t],length:4,test:e[32].test},{method:o.writeInt8,length:1,test:i[8].test},{method:o["writeInt16"+t],length:2,test:i[16].test},{method:o["writeInt32"+t],length:4,test:i[32].test}],this._methods.bySize={unsigned:{8:this._methods[0],16:this._methods[1],32:this._methods[2]},signed:{8:this._methods[3],16:this._methods[4],32:this._methods[5]}}},l.prototype._makeArrayLike=function(){for(var t=l.RANGE[8],e=(this.length,0);e<this.length;e++)(function(e){Object.defineProperty(this,e,{get:function(){return this.get(e)},set:function(i){if(!t.test(i))throw n.range(i,t);return this.set(e,i)},enumerable:!0,configurable:!0})}).bind(this)(e)},l.RANGE={8:s(-128,255),16:s(-32768,65535),32:s(-2147483648,4294967295)},l.UNSIGNED_RANGE={8:s(0,255),16:s(0,65535),32:s(0,4294967295)},l.SIGNED_RANGE={8:s(-128,127),16:s(-32768,32767),32:s(-2147483648,2147483647)},l.INT_SIZES=[8,16,32],l.NULL_BYTE=a([0]),e.exports=l},{"./lib/buffer.js":17,"./lib/errors.js":18,"./lib/range.js":19,util:97}],17:[function(t,e,i){var r=t("buffer").Buffer;r.concat=r.concat||function(t,e){if(!Array.isArray(t))throw new Error("Usage: Buffer.concat(list, [length])");if(0===t.length)return new r(0);if(1===t.length)return t[0];if("number"!=typeof e){e=0;for(var i=0;i<t.length;i++){e+=(a=t[i]).length}}var n=new r(e),s=0;for(i=0;i<t.length;i++){var a;(a=t[i]).copy(n,s),s+=a.length}return n},e.exports=r},{buffer:24}],18:[function(t,e,i){var r=t("util"),n=t("errs");e.exports={overflow:function(t,e,i){return n.create({name:"OverflowError",message:"Not enough space in the buffer left to write `"+t+"` (tried to write "+e+" bytes, only "+i+" remaining.)",writeLength:e,remaining:i,amountOver:e-i})},size:function(t,e){return n.create({name:"RangeError",message:r.format("Given an invalid size for writing an int (given: %s, expects: %j)",t,e),sizeGiven:t})},range:function(t,e){return n.create({name:"RangeError",message:r.format("Value outside of the valid range %j (given: %d)",e,t),min:e.min,max:e.max,value:t})},type:function(t,e){return n.create({name:"TypeError",message:r.format("Invalid type, got %s, expected %s",typeof t,e),value:t,valueType:typeof t,expectedType:e})},arrayType:function(t,e){return n.create({name:"TypeError",message:r.format("Trying to write array with non-numeric types (%j at position %d)",t[e],e),array:t,position:e,value:t[e]})},dispatch:function(t,e){return n.create({name:"DispatchError",message:r.format("Could not figure out how to dispatch (data: %j, opts: %j)",t,e)})}}},{errs:28,util:97}],19:[function(t,e,i){function r(t,e){if(!(this instanceof r))return new r(t,e);this.min=t,this.max=e,this.array=[t,e],this.test=this.test.bind(this)}r.prototype.test=function(t){return!(t<this.min||t>this.max)},r.prototype.toJSON=function(){return"["+this.array.join(", ")+"]"},e.exports=r},{}],20:[function(t,e,i){},{}],21:[function(t,e,i){(function(e,r){"use strict";var n=t("assert"),s=t("pako/lib/zlib/zstream"),a=t("pako/lib/zlib/deflate.js"),o=t("pako/lib/zlib/inflate.js"),l=t("pako/lib/zlib/constants");for(var h in l)i[h]=l[h];i.NONE=0,i.DEFLATE=1,i.INFLATE=2,i.GZIP=3,i.GUNZIP=4,i.DEFLATERAW=5,i.INFLATERAW=6,i.UNZIP=7;function u(t){if("number"!=typeof t||t<i.DEFLATE||t>i.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}u.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,n(this.init_done,"close before init"),n(this.mode<=i.UNZIP),this.mode===i.DEFLATE||this.mode===i.GZIP||this.mode===i.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==i.INFLATE&&this.mode!==i.GUNZIP&&this.mode!==i.INFLATERAW&&this.mode!==i.UNZIP||o.inflateEnd(this.strm),this.mode=i.NONE,this.dictionary=null)},u.prototype.write=function(t,e,i,r,n,s,a){return this._write(!0,t,e,i,r,n,s,a)},u.prototype.writeSync=function(t,e,i,r,n,s,a){return this._write(!1,t,e,i,r,n,s,a)},u.prototype._write=function(t,s,a,o,l,h,u,f){if(n.equal(arguments.length,8),n(this.init_done,"write before init"),n(this.mode!==i.NONE,"already finalized"),n.equal(!1,this.write_in_progress,"write already in progress"),n.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,n.equal(!1,void 0===s,"must provide flush value"),this.write_in_progress=!0,s!==i.Z_NO_FLUSH&&s!==i.Z_PARTIAL_FLUSH&&s!==i.Z_SYNC_FLUSH&&s!==i.Z_FULL_FLUSH&&s!==i.Z_FINISH&&s!==i.Z_BLOCK)throw new Error("Invalid flush value");if(null==a&&(a=r.alloc(0),l=0,o=0),this.strm.avail_in=l,this.strm.input=a,this.strm.next_in=o,this.strm.avail_out=f,this.strm.output=h,this.strm.next_out=u,this.flush=s,!t)return this._process(),this._checkError()?this._afterSync():void 0;var c=this;return e.nextTick((function(){c._process(),c._after()})),this},u.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},u.prototype._process=function(){var t=null;switch(this.mode){case i.DEFLATE:case i.GZIP:case i.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case i.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=i.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=i.GUNZIP):this.mode=i.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case i.INFLATE:case i.GUNZIP:case i.INFLATERAW:for(this.err=o.inflate(this.strm,this.flush),this.err===i.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===i.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===i.Z_DATA_ERROR&&(this.err=i.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===i.GUNZIP&&this.err===i.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},u.prototype._checkError=function(){switch(this.err){case i.Z_OK:case i.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===i.Z_FINISH)return this._error("unexpected end of file"),!1;break;case i.Z_STREAM_END:break;case i.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},u.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},u.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},u.prototype.init=function(t,e,r,s,a){n(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),n(t>=8&&t<=15,"invalid windowBits"),n(e>=-1&&e<=9,"invalid compression level"),n(r>=1&&r<=9,"invalid memlevel"),n(s===i.Z_FILTERED||s===i.Z_HUFFMAN_ONLY||s===i.Z_RLE||s===i.Z_FIXED||s===i.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(e,t,r,s,a),this._setDictionary()},u.prototype.params=function(){throw new Error("deflateParams Not supported")},u.prototype.reset=function(){this._reset(),this._setDictionary()},u.prototype._init=function(t,e,r,n,l){switch(this.level=t,this.windowBits=e,this.memLevel=r,this.strategy=n,this.flush=i.Z_NO_FLUSH,this.err=i.Z_OK,this.mode!==i.GZIP&&this.mode!==i.GUNZIP||(this.windowBits+=16),this.mode===i.UNZIP&&(this.windowBits+=32),this.mode!==i.DEFLATERAW&&this.mode!==i.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new s,this.mode){case i.DEFLATE:case i.GZIP:case i.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,i.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case i.INFLATE:case i.GUNZIP:case i.INFLATERAW:case i.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==i.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},u.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=i.Z_OK,this.mode){case i.DEFLATE:case i.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==i.Z_OK&&this._error("Failed to set dictionary")}},u.prototype._reset=function(){switch(this.err=i.Z_OK,this.mode){case i.DEFLATE:case i.DEFLATERAW:case i.GZIP:this.err=a.deflateReset(this.strm);break;case i.INFLATE:case i.INFLATERAW:case i.GUNZIP:this.err=o.inflateReset(this.strm)}this.err!==i.Z_OK&&this._error("Failed to reset stream")},i.Zlib=u}).call(this,t("_process"),t("buffer").Buffer)},{_process:47,assert:9,buffer:24,"pako/lib/zlib/constants":37,"pako/lib/zlib/deflate.js":39,"pako/lib/zlib/inflate.js":41,"pako/lib/zlib/zstream":45}],22:[function(t,e,i){(function(e){"use strict";var r=t("buffer").Buffer,n=t("stream").Transform,s=t("./binding"),a=t("util"),o=t("assert").ok,l=t("buffer").kMaxLength,h="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";s.Z_MIN_WINDOWBITS=8,s.Z_MAX_WINDOWBITS=15,s.Z_DEFAULT_WINDOWBITS=15,s.Z_MIN_CHUNK=64,s.Z_MAX_CHUNK=1/0,s.Z_DEFAULT_CHUNK=16384,s.Z_MIN_MEMLEVEL=1,s.Z_MAX_MEMLEVEL=9,s.Z_DEFAULT_MEMLEVEL=8,s.Z_MIN_LEVEL=-1,s.Z_MAX_LEVEL=9,s.Z_DEFAULT_LEVEL=s.Z_DEFAULT_COMPRESSION;for(var u=Object.keys(s),f=0;f<u.length;f++){var c=u[f];c.match(/^Z/)&&Object.defineProperty(i,c,{enumerable:!0,value:s[c],writable:!1})}for(var d={Z_OK:s.Z_OK,Z_STREAM_END:s.Z_STREAM_END,Z_NEED_DICT:s.Z_NEED_DICT,Z_ERRNO:s.Z_ERRNO,Z_STREAM_ERROR:s.Z_STREAM_ERROR,Z_DATA_ERROR:s.Z_DATA_ERROR,Z_MEM_ERROR:s.Z_MEM_ERROR,Z_BUF_ERROR:s.Z_BUF_ERROR,Z_VERSION_ERROR:s.Z_VERSION_ERROR},p=Object.keys(d),_=0;_<p.length;_++){var g=p[_];d[d[g]]=g}function m(t,e,i){var n=[],s=0;function a(){for(var e;null!==(e=t.read());)n.push(e),s+=e.length;t.once("readable",a)}function o(){var e,a=null;s>=l?a=new RangeError(h):e=r.concat(n,s),n=[],t.close(),i(a,e)}t.on("error",(function(e){t.removeListener("end",o),t.removeListener("readable",a),i(e)})),t.on("end",o),t.end(e),a()}function w(t,e){if("string"==typeof e&&(e=r.from(e)),!r.isBuffer(e))throw new TypeError("Not a string or buffer");var i=t._finishFlushFlag;return t._processChunk(e,i)}function b(t){if(!(this instanceof b))return new b(t);I.call(this,t,s.DEFLATE)}function y(t){if(!(this instanceof y))return new y(t);I.call(this,t,s.INFLATE)}function v(t){if(!(this instanceof v))return new v(t);I.call(this,t,s.GZIP)}function x(t){if(!(this instanceof x))return new x(t);I.call(this,t,s.GUNZIP)}function E(t){if(!(this instanceof E))return new E(t);I.call(this,t,s.DEFLATERAW)}function k(t){if(!(this instanceof k))return new k(t);I.call(this,t,s.INFLATERAW)}function S(t){if(!(this instanceof S))return new S(t);I.call(this,t,s.UNZIP)}function T(t){return t===s.Z_NO_FLUSH||t===s.Z_PARTIAL_FLUSH||t===s.Z_SYNC_FLUSH||t===s.Z_FULL_FLUSH||t===s.Z_FINISH||t===s.Z_BLOCK}function I(t,e){var a=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||i.Z_DEFAULT_CHUNK,n.call(this,t),t.flush&&!T(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!T(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||s.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:s.Z_FINISH,t.chunkSize&&(t.chunkSize<i.Z_MIN_CHUNK||t.chunkSize>i.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<i.Z_MIN_WINDOWBITS||t.windowBits>i.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<i.Z_MIN_LEVEL||t.level>i.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<i.Z_MIN_MEMLEVEL||t.memLevel>i.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=i.Z_FILTERED&&t.strategy!=i.Z_HUFFMAN_ONLY&&t.strategy!=i.Z_RLE&&t.strategy!=i.Z_FIXED&&t.strategy!=i.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!r.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new s.Zlib(e);var o=this;this._hadError=!1,this._handle.onerror=function(t,e){j(o),o._hadError=!0;var r=new Error(t);r.errno=e,r.code=i.codes[e],o.emit("error",r)};var l=i.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(l=t.level);var h=i.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(h=t.strategy),this._handle.init(t.windowBits||i.Z_DEFAULT_WINDOWBITS,l,t.memLevel||i.Z_DEFAULT_MEMLEVEL,h,t.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=h,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!a._handle},configurable:!0,enumerable:!0})}function j(t,i){i&&e.nextTick(i),t._handle&&(t._handle.close(),t._handle=null)}function A(t){t.emit("close")}Object.defineProperty(i,"codes",{enumerable:!0,value:Object.freeze(d),writable:!1}),i.Deflate=b,i.Inflate=y,i.Gzip=v,i.Gunzip=x,i.DeflateRaw=E,i.InflateRaw=k,i.Unzip=S,i.createDeflate=function(t){return new b(t)},i.createInflate=function(t){return new y(t)},i.createDeflateRaw=function(t){return new E(t)},i.createInflateRaw=function(t){return new k(t)},i.createGzip=function(t){return new v(t)},i.createGunzip=function(t){return new x(t)},i.createUnzip=function(t){return new S(t)},i.deflate=function(t,e,i){return"function"==typeof e&&(i=e,e={}),m(new b(e),t,i)},i.deflateSync=function(t,e){return w(new b(e),t)},i.gzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),m(new v(e),t,i)},i.gzipSync=function(t,e){return w(new v(e),t)},i.deflateRaw=function(t,e,i){return"function"==typeof e&&(i=e,e={}),m(new E(e),t,i)},i.deflateRawSync=function(t,e){return w(new E(e),t)},i.unzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),m(new S(e),t,i)},i.unzipSync=function(t,e){return w(new S(e),t)},i.inflate=function(t,e,i){return"function"==typeof e&&(i=e,e={}),m(new y(e),t,i)},i.inflateSync=function(t,e){return w(new y(e),t)},i.gunzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),m(new x(e),t,i)},i.gunzipSync=function(t,e){return w(new x(e),t)},i.inflateRaw=function(t,e,i){return"function"==typeof e&&(i=e,e={}),m(new k(e),t,i)},i.inflateRawSync=function(t,e){return w(new k(e),t)},a.inherits(I,n),I.prototype.params=function(t,r,n){if(t<i.Z_MIN_LEVEL||t>i.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(r!=i.Z_FILTERED&&r!=i.Z_HUFFMAN_ONLY&&r!=i.Z_RLE&&r!=i.Z_FIXED&&r!=i.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==t||this._strategy!==r){var a=this;this.flush(s.Z_SYNC_FLUSH,(function(){o(a._handle,"zlib binding closed"),a._handle.params(t,r),a._hadError||(a._level=t,a._strategy=r,n&&n())}))}else e.nextTick(n)},I.prototype.reset=function(){return o(this._handle,"zlib binding closed"),this._handle.reset()},I.prototype._flush=function(t){this._transform(r.alloc(0),"",t)},I.prototype.flush=function(t,i){var n=this,a=this._writableState;("function"==typeof t||void 0===t&&!i)&&(i=t,t=s.Z_FULL_FLUSH),a.ended?i&&e.nextTick(i):a.ending?i&&this.once("end",i):a.needDrain?i&&this.once("drain",(function(){return n.flush(t,i)})):(this._flushFlag=t,this.write(r.alloc(0),"",i))},I.prototype.close=function(t){j(this,t),e.nextTick(A,this)},I.prototype._transform=function(t,e,i){var n,a=this._writableState,o=(a.ending||a.ended)&&(!t||a.length===t.length);return null===t||r.isBuffer(t)?this._handle?(o?n=this._finishFlushFlag:(n=this._flushFlag,t.length>=a.length&&(this._flushFlag=this._opts.flush||s.Z_NO_FLUSH)),void this._processChunk(t,n,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},I.prototype._processChunk=function(t,e,i){var n=t&&t.length,s=this._chunkSize-this._offset,a=0,u=this,f="function"==typeof i;if(!f){var c,d=[],p=0;this.on("error",(function(t){c=t})),o(this._handle,"zlib binding closed");do{var _=this._handle.writeSync(e,t,a,n,this._buffer,this._offset,s)}while(!this._hadError&&w(_[0],_[1]));if(this._hadError)throw c;if(p>=l)throw j(this),new RangeError(h);var g=r.concat(d,p);return j(this),g}o(this._handle,"zlib binding closed");var m=this._handle.write(e,t,a,n,this._buffer,this._offset,s);function w(l,h){if(this&&(this.buffer=null,this.callback=null),!u._hadError){var c=s-h;if(o(c>=0,"have should not go down"),c>0){var _=u._buffer.slice(u._offset,u._offset+c);u._offset+=c,f?u.push(_):(d.push(_),p+=_.length)}if((0===h||u._offset>=u._chunkSize)&&(s=u._chunkSize,u._offset=0,u._buffer=r.allocUnsafe(u._chunkSize)),0===h){if(a+=n-l,n=l,!f)return!0;var g=u._handle.write(e,t,a,n,u._buffer,u._offset,u._chunkSize);return g.callback=w,void(g.buffer=t)}if(!f)return!1;i()}}m.buffer=t,m.callback=w},a.inherits(b,I),a.inherits(y,I),a.inherits(v,I),a.inherits(x,I),a.inherits(E,I),a.inherits(k,I),a.inherits(S,I)}).call(this,t("_process"))},{"./binding":21,_process:47,assert:9,buffer:24,stream:63,util:97}],23:[function(t,e,i){var r=t("buffer").Buffer,n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function s(t){r.isBuffer(t)||(t=r(t));for(var e=4294967295,i=0;i<t.length;i++)e=n[255&(e^t[i])]^e>>>8;return 4294967295^e}function a(){return t=s.apply(null,arguments),(e=r(4)).writeInt32BE(t,0),e;var t,e}a.signed=function(){return s.apply(null,arguments)},a.unsigned=function(){return a.apply(null,arguments).readUInt32BE(0)},e.exports=a},{buffer:24}],24:[function(t,e,i){(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var r=t("base64-js"),n=t("ieee754"),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=e,i.SlowBuffer=function(t){+t!=t&&(t=0);return e.alloc(+t)},i.INSPECT_MAX_BYTES=50;var a=2147483647;function o(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');var i=new Uint8Array(t);return Object.setPrototypeOf(i,e.prototype),i}function e(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return l(t,e,i)}function l(t,i,r){if("string"==typeof t)return function(t,i){"string"==typeof i&&""!==i||(i="utf8");if(!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var r=0|d(t,i),n=o(r),s=n.write(t,i);s!==r&&(n=n.slice(0,s));return n}(t,i);if(ArrayBuffer.isView(t))return f(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(F(t,ArrayBuffer)||t&&F(t.buffer,ArrayBuffer))return function(t,i,r){if(i<0||t.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<i+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===i&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,i):new Uint8Array(t,i,r);return Object.setPrototypeOf(n,e.prototype),n}(t,i,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return e.from(n,i,r);var s=function(t){if(e.isBuffer(t)){var i=0|c(t.length),r=o(i);return 0===r.length?r:(t.copy(r,0,0,i),r)}if(void 0!==t.length)return"number"!=typeof t.length||P(t.length)?o(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return e.from(t[Symbol.toPrimitive]("string"),i,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return h(t),o(t<0?0:0|c(t))}function f(t){for(var e=t.length<0?0:0|c(t.length),i=o(e),r=0;r<e;r+=1)i[r]=255&t[r];return i}function c(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function d(t,i){if(e.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||F(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var s=!1;;)switch(i){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return C(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return M(t).length;default:if(s)return n?-1:C(t).length;i=(""+i).toLowerCase(),s=!0}}function p(t,e,i){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,i);case"utf8":case"utf-8":return S(this,e,i);case"ascii":return I(this,e,i);case"latin1":case"binary":return j(this,e,i);case"base64":return k(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function g(t,i,r,n,s){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),P(r=+r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof i&&(i=e.from(i,n)),e.isBuffer(i))return 0===i.length?-1:m(t,i,r,n,s);if("number"==typeof i)return i&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,i,r):Uint8Array.prototype.lastIndexOf.call(t,i,r):m(t,[i],r,n,s);throw new TypeError("val must be string, number or Buffer")}function m(t,e,i,r,n){var s,a=1,o=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,o/=2,l/=2,i/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){var u=-1;for(s=i;s<o;s++)if(h(t,s)===h(e,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*a}else-1!==u&&(s-=s-u),u=-1}else for(i+l>o&&(i=o-l),s=i;s>=0;s--){for(var f=!0,c=0;c<l;c++)if(h(t,s+c)!==h(e,c)){f=!1;break}if(f)return s}return-1}function w(t,e,i,r){i=Number(i)||0;var n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;var s=e.length;r>s/2&&(r=s/2);for(var a=0;a<r;++a){var o=parseInt(e.substr(2*a,2),16);if(P(o))return a;t[i+a]=o}return a}function b(t,e,i,r){return D(C(e,t.length-i),t,i,r)}function y(t,e,i,r){return D(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function v(t,e,i,r){return y(t,e,i,r)}function x(t,e,i,r){return D(M(e),t,i,r)}function E(t,e,i,r){return D(function(t,e){for(var i,r,n,s=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),r=i>>8,n=i%256,s.push(n),s.push(r);return s}(e,t.length-i),t,i,r)}function k(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function S(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var s,a,o,l,h=t[n],u=null,f=h>239?4:h>223?3:h>191?2:1;if(n+f<=i)switch(f){case 1:h<128&&(u=h);break;case 2:128==(192&(s=t[n+1]))&&(l=(31&h)<<6|63&s)>127&&(u=l);break;case 3:s=t[n+1],a=t[n+2],128==(192&s)&&128==(192&a)&&(l=(15&h)<<12|(63&s)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=t[n+1],a=t[n+2],o=t[n+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(l=(15&h)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(u=l)}null===u?(u=65533,f=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),n+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=T));return i}(r)}i.kMaxLength=a,e.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(t,e,i){return l(t,e,i)},Object.setPrototypeOf(e.prototype,Uint8Array.prototype),Object.setPrototypeOf(e,Uint8Array),e.alloc=function(t,e,i){return function(t,e,i){return h(t),t<=0?o(t):void 0!==e?"string"==typeof i?o(t).fill(e,i):o(t).fill(e):o(t)}(t,e,i)},e.allocUnsafe=function(t){return u(t)},e.allocUnsafeSlow=function(t){return u(t)},e.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==e.prototype},e.compare=function(t,i){if(F(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),F(i,Uint8Array)&&(i=e.from(i,i.offset,i.byteLength)),!e.isBuffer(t)||!e.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;for(var r=t.length,n=i.length,s=0,a=Math.min(r,n);s<a;++s)if(t[s]!==i[s]){r=t[s],n=i[s];break}return r<n?-1:n<r?1:0},e.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,i){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var r;if(void 0===i)for(i=0,r=0;r<t.length;++r)i+=t[r].length;var n=e.allocUnsafe(i),s=0;for(r=0;r<t.length;++r){var a=t[r];if(F(a,Uint8Array)&&(a=e.from(a)),!e.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,s),s+=a.length}return n},e.byteLength=d,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},e.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},e.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},e.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):p.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},s&&(e.prototype[s]=e.prototype.inspect),e.prototype.compare=function(t,i,r,n,s){if(F(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),!e.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===i&&(i=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),i<0||r>t.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&i>=r)return 0;if(n>=s)return-1;if(i>=r)return 1;if(this===t)return 0;for(var a=(s>>>=0)-(n>>>=0),o=(r>>>=0)-(i>>>=0),l=Math.min(a,o),h=this.slice(n,s),u=t.slice(i,r),f=0;f<l;++f)if(h[f]!==u[f]){a=h[f],o=u[f];break}return a<o?-1:o<a?1:0},e.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},e.prototype.indexOf=function(t,e,i){return g(this,t,e,i,!0)},e.prototype.lastIndexOf=function(t,e,i){return g(this,t,e,i,!1)},e.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return w(this,t,e,i);case"utf8":case"utf-8":return b(this,t,e,i);case"ascii":return y(this,t,e,i);case"latin1":case"binary":return v(this,t,e,i);case"base64":return x(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function I(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function j(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function A(t,e,i){var r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);for(var n="",s=e;s<i;++s)n+=Z[t[s]];return n}function L(t,e,i){for(var r=t.slice(e,i),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}function R(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function z(t,i,r,n,s,a){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>s||i<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function O(t,e,i,r,n,s){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function U(t,e,i,r,s){return e=+e,i>>>=0,s||O(t,0,i,4),n.write(t,e,i,r,23,4),i+4}function B(t,e,i,r,s){return e=+e,i>>>=0,s||O(t,0,i,8),n.write(t,e,i,r,52,8),i+8}e.prototype.slice=function(t,i){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(i=void 0===i?r:~~i)<0?(i+=r)<0&&(i=0):i>r&&(i=r),i<t&&(i=t);var n=this.subarray(t,i);return Object.setPrototypeOf(n,e.prototype),n},e.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||R(t,e,this.length);for(var r=this[t],n=1,s=0;++s<e&&(n*=256);)r+=this[t+s]*n;return r},e.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||R(t,e,this.length);for(var r=this[t+--e],n=1;e>0&&(n*=256);)r+=this[t+--e]*n;return r},e.prototype.readUInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),this[t]},e.prototype.readUInt16LE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]|this[t+1]<<8},e.prototype.readUInt16BE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]<<8|this[t+1]},e.prototype.readUInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},e.prototype.readUInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},e.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||R(t,e,this.length);for(var r=this[t],n=1,s=0;++s<e&&(n*=256);)r+=this[t+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},e.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||R(t,e,this.length);for(var r=e,n=1,s=this[t+--r];r>0&&(n*=256);)s+=this[t+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*e)),s},e.prototype.readInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},e.prototype.readInt16LE=function(t,e){t>>>=0,e||R(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},e.prototype.readInt16BE=function(t,e){t>>>=0,e||R(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},e.prototype.readInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},e.prototype.readInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},e.prototype.readFloatLE=function(t,e){return t>>>=0,e||R(t,4,this.length),n.read(this,t,!0,23,4)},e.prototype.readFloatBE=function(t,e){return t>>>=0,e||R(t,4,this.length),n.read(this,t,!1,23,4)},e.prototype.readDoubleLE=function(t,e){return t>>>=0,e||R(t,8,this.length),n.read(this,t,!0,52,8)},e.prototype.readDoubleBE=function(t,e){return t>>>=0,e||R(t,8,this.length),n.read(this,t,!1,52,8)},e.prototype.writeUIntLE=function(t,e,i,r){(t=+t,e>>>=0,i>>>=0,r)||z(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,s=0;for(this[e]=255&t;++s<i&&(n*=256);)this[e+s]=t/n&255;return e+i},e.prototype.writeUIntBE=function(t,e,i,r){(t=+t,e>>>=0,i>>>=0,r)||z(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+i},e.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,1,255,0),this[e]=255&t,e+1},e.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},e.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){var n=Math.pow(2,8*i-1);z(this,t,e,i,n-1,-n)}var s=0,a=1,o=0;for(this[e]=255&t;++s<i&&(a*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+i},e.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){var n=Math.pow(2,8*i-1);z(this,t,e,i,n-1,-n)}var s=i-1,a=1,o=0;for(this[e+s]=255&t;--s>=0&&(a*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+i},e.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},e.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},e.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeFloatLE=function(t,e,i){return U(this,t,e,!0,i)},e.prototype.writeFloatBE=function(t,e,i){return U(this,t,e,!1,i)},e.prototype.writeDoubleLE=function(t,e,i){return B(this,t,e,!0,i)},e.prototype.writeDoubleBE=function(t,e,i){return B(this,t,e,!1,i)},e.prototype.copy=function(t,i,r,n){if(!e.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),i>=t.length&&(i=t.length),i||(i=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-i<n-r&&(n=t.length-i+r);var s=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(i,r,n);else if(this===t&&r<i&&i<n)for(var a=s-1;a>=0;--a)t[a+i]=this[a+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),i);return s},e.prototype.fill=function(t,i,r,n){if("string"==typeof t){if("string"==typeof i?(n=i,i=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!e.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var s=t.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(t=s)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(i<0||this.length<i||this.length<r)throw new RangeError("Out of range index");if(r<=i)return this;var a;if(i>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=i;a<r;++a)this[a]=t;else{var o=e.isBuffer(t)?t:e.from(t,n),l=o.length;if(0===l)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<r-i;++a)this[a+i]=o[a%l]}return this};var N=/[^+/0-9A-Za-z-_]/g;function C(t,e){var i;e=e||1/0;for(var r=t.length,n=null,s=[],a=0;a<r;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function M(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function D(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function F(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function P(t){return t!=t}var Z=function(){for(var t=new Array(256),e=0;e<16;++e)for(var i=16*e,r=0;r<16;++r)t[i+r]="0123456789abcdef"[e]+"0123456789abcdef"[r];return t}()}).call(this,t("buffer").Buffer)},{"base64-js":13,buffer:24,ieee754:30}],25:[function(t,e,i){e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}},{}],26:[function(t,e,i){var r=t("./colors");e.exports=function(t){return function(t){var e=r[t.toLowerCase()];if(!e)return;return{r:e[0],g:e[1],b:e[2]}}(t)||function(t){if("#"==t[0]&&4==t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}}(t)||function(t){if("#"==t[0]&&7==t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}}(t)||function(t){if(0==t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}}(t)||function(t){if(0==t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}}(t)}},{"./colors":25}],27:[function(t,e,i){(function(t){function e(t){return Object.prototype.toString.call(t)}i.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},i.isBoolean=function(t){return"boolean"==typeof t},i.isNull=function(t){return null===t},i.isNullOrUndefined=function(t){return null==t},i.isNumber=function(t){return"number"==typeof t},i.isString=function(t){return"string"==typeof t},i.isSymbol=function(t){return"symbol"==typeof t},i.isUndefined=function(t){return void 0===t},i.isRegExp=function(t){return"[object RegExp]"===e(t)},i.isObject=function(t){return"object"==typeof t&&null!==t},i.isDate=function(t){return"[object Date]"===e(t)},i.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},i.isFunction=function(t){return"function"==typeof t},i.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},i.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":32}],28:[function(t,e,i){(function(e){var r=t("events");t("util");i.registered={},Error.prototype.toJSON||Object.defineProperty(Error.prototype,"toJSON",{enumerable:!1,value:function(){return function(t){for(var e=arguments.length,i=new Array(e-1),r=1;r<e;r++)i[r-1]=arguments[r];return i.forEach((function(e){Object.keys(e).forEach((function(i){var r=e.__lookupGetter__(i),n=e.__lookupSetter__(i);r||n?(n&&t.__defineSetter__(i,n),r&&t.__defineGetter__(i,r)):t[i]=e[i]}))})),t}({message:this.message,stack:this.stack,arguments:this.arguments,type:this.type},this)}}),i.create=function t(e,r){if(arguments[1]||i.registered[e]||(r=e,e=null),r&&r.stack)return r;var n,s,a;if("function"==typeof r&&(r=r()),Array.isArray(r))n=r.join(" "),r=null;else if(r)switch(typeof r){case"string":n=r||"Unspecified error",r=null;break;case"object":n=r&&r.message||"Unspecified error";break;default:n="Unspecified error"}return s=e&&i.registered[e]||Error,(a=new s(n)).name&&"Error"!==a.name||(a.name=r&&r.name||s.name||"Error"),a.stack?(a.stack=a.stack.split("\n"),a.stack.splice(1,1),a.stack=a.stack.join("\n")):(Error.call(a),Error.captureStackTrace(a,t)),r&&Object.keys(r).forEach((function(t){a[t]=r[t]})),a},i.merge=function(t,e,r){var n=i.create(e,r);return Array.isArray(t)||"object"!=typeof t||Object.keys(t).forEach((function(e){-1===["stack","type","arguments","message"].indexOf(e)&&(n[e]=t[e])})),n.name=n.name||t.name,n.message=n.message||t.message,n.stack=t.stack||n.stack,t.message&&(n.description=t.message),t.stack&&t.stack.split&&(n.stacktrace=t.stack.split("\n")),n},i.handle=function(t,n,s){if(t=i.create(t),"function"==typeof n&&n(t),"function"!=typeof n||s){var a=s||n||new r.EventEmitter;return e.nextTick((function(){a.emit("error",t)})),a}},i.register=function(t,e){1===arguments.length&&(t=(e=t).name.toLowerCase()),i.registered[t]=e},i.unregister=function(t){delete i.registered[t]}}).call(this,t("_process"))},{_process:47,events:29,util:97}],29:[function(t,e,i){var r=Object.create||function(t){var e=function(){};return e.prototype=t,new e},n=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return i},s=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var o,l=10;try{var h={};Object.defineProperty&&Object.defineProperty(h,"x",{value:0}),o=0===h.x}catch(t){o=!1}function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function f(t,e,i){if(e)t.call(i);else for(var r=t.length,n=v(t,r),s=0;s<r;++s)n[s].call(i)}function c(t,e,i,r){if(e)t.call(i,r);else for(var n=t.length,s=v(t,n),a=0;a<n;++a)s[a].call(i,r)}function d(t,e,i,r,n){if(e)t.call(i,r,n);else for(var s=t.length,a=v(t,s),o=0;o<s;++o)a[o].call(i,r,n)}function p(t,e,i,r,n,s){if(e)t.call(i,r,n,s);else for(var a=t.length,o=v(t,a),l=0;l<a;++l)o[l].call(i,r,n,s)}function _(t,e,i,r){if(e)t.apply(i,r);else for(var n=t.length,s=v(t,n),a=0;a<n;++a)s[a].apply(i,r)}function g(t,e,i,n){var s,a,o;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((a=t._events)?(a.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),a=t._events),o=a[e]):(a=t._events=r(null),t._eventsCount=0),o){if("function"==typeof o?o=a[e]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),!o.warned&&(s=u(t))&&s>0&&o.length>s){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else o=a[e]=i,++t._eventsCount;return t}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function w(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=s.call(m,r);return n.listener=i,r.wrapFn=n,n}function b(t,e,i){var r=t._events;if(!r)return[];var n=r[e];return n?"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):v(n,n.length):[]}function y(t){var e=this._events;if(e){var i=e[t];if("function"==typeof i)return 1;if(i)return i.length}return 0}function v(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}o?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');l=t}}):a.defaultMaxListeners=l,a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){var e,i,r,n,s,a,o="error"===t;if(a=this._events)o=o&&null==a.error;else if(!o)return!1;if(o){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var l=new Error('Unhandled "error" event. ('+e+")");throw l.context=e,l}if(!(i=a[t]))return!1;var h="function"==typeof i;switch(r=arguments.length){case 1:f(i,h,this);break;case 2:c(i,h,this,arguments[1]);break;case 3:d(i,h,this,arguments[1],arguments[2]);break;case 4:p(i,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(r-1),s=1;s<r;s++)n[s-1]=arguments[s];_(i,h,this,n)}return!0},a.prototype.addListener=function(t,e){return g(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return g(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,w(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,w(this,t,e)),this},a.prototype.removeListener=function(t,e){var i,n,s,a,o;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=r(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(s=-1,a=i.length-1;a>=0;a--)if(i[a]===e||i[a].listener===e){o=i[a].listener,s=a;break}if(s<0)return this;0===s?i.shift():function(t,e){for(var i=e,r=i+1,n=t.length;r<n;i+=1,r+=1)t[i]=t[r];t.pop()}(i,s),1===i.length&&(n[t]=i[0]),n.removeListener&&this.emit("removeListener",t,o||e)}return this},a.prototype.removeAllListeners=function(t){var e,i,s;if(!(i=this._events))return this;if(!i.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):i[t]&&(0==--this._eventsCount?this._events=r(null):delete i[t]),this;if(0===arguments.length){var a,o=n(i);for(s=0;s<o.length;++s)"removeListener"!==(a=o[s])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},a.prototype.listeners=function(t){return b(this,t,!0)},a.prototype.rawListeners=function(t){return b(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},a.prototype.listenerCount=y,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],30:[function(t,e,i){i.read=function(t,e,i,r,n){var s,a,o=8*n-r-1,l=(1<<o)-1,h=l>>1,u=-7,f=i?n-1:0,c=i?-1:1,d=t[e+f];for(f+=c,s=d&(1<<-u)-1,d>>=-u,u+=o;u>0;s=256*s+t[e+f],f+=c,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=r;u>0;a=256*a+t[e+f],f+=c,u-=8);if(0===s)s=1-h;else{if(s===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),s-=h}return(d?-1:1)*a*Math.pow(2,s-r)},i.write=function(t,e,i,r,n,s){var a,o,l,h=8*s-n-1,u=(1<<h)-1,f=u>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+f>=1?c/l:c*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=u?(o=0,a=u):a+f>=1?(o=(e*l-1)*Math.pow(2,n),a+=f):(o=e*Math.pow(2,f-1)*Math.pow(2,n),a=0));n>=8;t[i+d]=255&o,d+=p,o/=256,n-=8);for(a=a<<n|o,h+=n;h>0;t[i+d]=255&a,d+=p,a/=256,h-=8);t[i+d-p]|=128*_}},{}],31:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},{}],32:[function(t,e,i){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],33:[function(t,e,i){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],34:[function(t,e,i){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";var r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,o,l=a(t),h=1;h<arguments.length;h++){for(var u in i=Object(arguments[h]))n.call(i,u)&&(l[u]=i[u]);if(r){o=r(i);for(var f=0;f<o.length;f++)s.call(i,o[f])&&(l[o[f]]=i[o[f]])}}return l}},{}],35:[function(t,e,i){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)n(i,r)&&(t[r]=i[r])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var s={arraySet:function(t,e,i,r,n){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+r),n);else for(var s=0;s<r;s++)t[n+s]=e[i+s]},flattenChunks:function(t){var e,i,r,n,s,a;for(r=0,e=0,i=t.length;e<i;e++)r+=t[e].length;for(a=new Uint8Array(r),n=0,e=0,i=t.length;e<i;e++)s=t[e],a.set(s,n),n+=s.length;return a}},a={arraySet:function(t,e,i,r,n){for(var s=0;s<r;s++)t[n+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(r)},{}],36:[function(t,e,i){"use strict";e.exports=function(t,e,i,r){for(var n=65535&t|0,s=t>>>16&65535|0,a=0;0!==i;){i-=a=i>2e3?2e3:i;do{s=s+(n=n+e[r++]|0)|0}while(--a);n%=65521,s%=65521}return n|s<<16|0}},{}],37:[function(t,e,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],38:[function(t,e,i){"use strict";var r=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e,i,n){var s=r,a=n+i;t^=-1;for(var o=n;o<a;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}},{}],39:[function(t,e,i){"use strict";var r,n=t("../utils/common"),s=t("./trees"),a=t("./adler32"),o=t("./crc32"),l=t("./messages"),h=0,u=1,f=3,c=4,d=5,p=0,_=1,g=-2,m=-3,w=-5,b=-1,y=1,v=2,x=3,E=4,k=0,S=2,T=8,I=9,j=15,A=8,L=286,R=30,z=19,O=2*L+1,U=15,B=3,N=258,C=N+B+1,M=32,D=42,F=69,P=73,Z=91,$=103,q=113,H=666,G=1,W=2,X=3,Y=4,K=3;function V(t,e){return t.msg=l[e],e}function J(t){return(t<<1)-(t>4?9:0)}function Q(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(n.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function et(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function it(t,e){t.pending_buf[t.pending++]=e}function rt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function nt(t,e){var i,r,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-C?t.strstart-(t.w_size-C):0,h=t.window,u=t.w_mask,f=t.prev,c=t.strstart+N,d=h[s+a-1],p=h[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(i=e)+a]===p&&h[i+a-1]===d&&h[i]===h[s]&&h[++i]===h[s+1]){s+=2,i++;do{}while(h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&s<c);if(r=N-(c-s),s=c-N,r>a){if(t.match_start=e,a=r,r>=o)break;d=h[s+a-1],p=h[s+a]}}}while((e=f[e&u])>l&&0!=--n);return a<=t.lookahead?a:t.lookahead}function st(t){var e,i,r,s,l,h,u,f,c,d,p=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-C)){n.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=i=t.hash_size;do{r=t.head[--e],t.head[e]=r>=p?r-p:0}while(--i);e=i=p;do{r=t.prev[--e],t.prev[e]=r>=p?r-p:0}while(--i);s+=p}if(0===t.strm.avail_in)break;if(h=t.strm,u=t.window,f=t.strstart+t.lookahead,c=s,d=void 0,(d=h.avail_in)>c&&(d=c),i=0===d?0:(h.avail_in-=d,n.arraySet(u,h.input,h.next_in,d,f),1===h.state.wrap?h.adler=a(h.adler,u,d,f):2===h.state.wrap&&(h.adler=o(h.adler,u,d,f)),h.next_in+=d,h.total_in+=d,d),t.lookahead+=i,t.lookahead+t.insert>=B)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+B-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<B)););}while(t.lookahead<C&&0!==t.strm.avail_in)}function at(t,e){for(var i,r;;){if(t.lookahead<C){if(st(t),t.lookahead<C&&e===h)return G;if(0===t.lookahead)break}if(i=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-C&&(t.match_length=nt(t,i)),t.match_length>=B)if(r=s._tr_tally(t,t.strstart-t.match_start,t.match_length-B),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=B){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=t.strstart<B-1?t.strstart:B-1,e===c?(et(t,!0),0===t.strm.avail_out?X:Y):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}function ot(t,e){for(var i,r,n;;){if(t.lookahead<C){if(st(t),t.lookahead<C&&e===h)return G;if(0===t.lookahead)break}if(i=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=B-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-C&&(t.match_length=nt(t,i),t.match_length<=5&&(t.strategy===y||t.match_length===B&&t.strstart-t.match_start>4096)&&(t.match_length=B-1)),t.prev_length>=B&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-B,r=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-B),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=B-1,t.strstart++,r&&(et(t,!1),0===t.strm.avail_out))return G}else if(t.match_available){if((r=s._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return G}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<B-1?t.strstart:B-1,e===c?(et(t,!0),0===t.strm.avail_out?X:Y):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}function lt(t,e,i,r,n){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=r,this.func=n}function ht(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*O),this.dyn_dtree=new n.Buf16(2*(2*R+1)),this.bl_tree=new n.Buf16(2*(2*z+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(U+1),this.heap=new n.Buf16(2*L+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*L+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=S,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?D:q,t.adler=2===e.wrap?0:1,e.last_flush=h,s._tr_init(e),p):V(t,g)}function ft(t){var e,i=ut(t);return i===p&&((e=t.state).window_size=2*e.w_size,Q(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=B-1,e.match_available=0,e.ins_h=0),i}function ct(t,e,i,r,s,a){if(!t)return g;var o=1;if(e===b&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),s<1||s>I||i!==T||r<8||r>15||e<0||e>9||a<0||a>E)return V(t,g);8===r&&(r=9);var l=new ht;return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+B-1)/B),l.window=new n.Buf8(2*l.w_size),l.head=new n.Buf16(l.hash_size),l.prev=new n.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new n.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=i,ft(t)}r=[new lt(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(st(t),0===t.lookahead&&e===h)return G;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,et(t,!1),0===t.strm.avail_out))return G;if(t.strstart-t.block_start>=t.w_size-C&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=0,e===c?(et(t,!0),0===t.strm.avail_out?X:Y):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),G)})),new lt(4,4,8,4,at),new lt(4,5,16,8,at),new lt(4,6,32,32,at),new lt(4,4,16,16,ot),new lt(8,16,32,32,ot),new lt(8,16,128,128,ot),new lt(8,32,128,256,ot),new lt(32,128,258,1024,ot),new lt(32,258,258,4096,ot)],i.deflateInit=function(t,e){return ct(t,e,T,j,A,k)},i.deflateInit2=ct,i.deflateReset=ft,i.deflateResetKeep=ut,i.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,p):g},i.deflate=function(t,e){var i,n,a,l;if(!t||!t.state||e>d||e<0)return t?V(t,g):g;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||n.status===H&&e!==c)return V(t,0===t.avail_out?w:g);if(n.strm=t,i=n.last_flush,n.last_flush=e,n.status===D)if(2===n.wrap)t.adler=0,it(n,31),it(n,139),it(n,8),n.gzhead?(it(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),it(n,255&n.gzhead.time),it(n,n.gzhead.time>>8&255),it(n,n.gzhead.time>>16&255),it(n,n.gzhead.time>>24&255),it(n,9===n.level?2:n.strategy>=v||n.level<2?4:0),it(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(it(n,255&n.gzhead.extra.length),it(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=o(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=F):(it(n,0),it(n,0),it(n,0),it(n,0),it(n,0),it(n,9===n.level?2:n.strategy>=v||n.level<2?4:0),it(n,K),n.status=q);else{var m=T+(n.w_bits-8<<4)<<8;m|=(n.strategy>=v||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(m|=M),m+=31-m%31,n.status=q,rt(n,m),0!==n.strstart&&(rt(n,t.adler>>>16),rt(n,65535&t.adler)),t.adler=1}if(n.status===F)if(n.gzhead.extra){for(a=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),tt(t),a=n.pending,n.pending!==n.pending_buf_size));)it(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=P)}else n.status=P;if(n.status===P)if(n.gzhead.name){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),tt(t),a=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,it(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),0===l&&(n.gzindex=0,n.status=Z)}else n.status=Z;if(n.status===Z)if(n.gzhead.comment){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),tt(t),a=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,it(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),0===l&&(n.status=$)}else n.status=$;if(n.status===$&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&tt(t),n.pending+2<=n.pending_buf_size&&(it(n,255&t.adler),it(n,t.adler>>8&255),t.adler=0,n.status=q)):n.status=q),0!==n.pending){if(tt(t),0===t.avail_out)return n.last_flush=-1,p}else if(0===t.avail_in&&J(e)<=J(i)&&e!==c)return V(t,w);if(n.status===H&&0!==t.avail_in)return V(t,w);if(0!==t.avail_in||0!==n.lookahead||e!==h&&n.status!==H){var b=n.strategy===v?function(t,e){for(var i;;){if(0===t.lookahead&&(st(t),0===t.lookahead)){if(e===h)return G;break}if(t.match_length=0,i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=0,e===c?(et(t,!0),0===t.strm.avail_out?X:Y):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}(n,e):n.strategy===x?function(t,e){for(var i,r,n,a,o=t.window;;){if(t.lookahead<=N){if(st(t),t.lookahead<=N&&e===h)return G;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=B&&t.strstart>0&&(r=o[n=t.strstart-1])===o[++n]&&r===o[++n]&&r===o[++n]){a=t.strstart+N;do{}while(r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&n<a);t.match_length=N-(a-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=B?(i=s._tr_tally(t,1,t.match_length-B),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=0,e===c?(et(t,!0),0===t.strm.avail_out?X:Y):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}(n,e):r[n.level].func(n,e);if(b!==X&&b!==Y||(n.status=H),b===G||b===X)return 0===t.avail_out&&(n.last_flush=-1),p;if(b===W&&(e===u?s._tr_align(n):e!==d&&(s._tr_stored_block(n,0,0,!1),e===f&&(Q(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),tt(t),0===t.avail_out))return n.last_flush=-1,p}return e!==c?p:n.wrap<=0?_:(2===n.wrap?(it(n,255&t.adler),it(n,t.adler>>8&255),it(n,t.adler>>16&255),it(n,t.adler>>24&255),it(n,255&t.total_in),it(n,t.total_in>>8&255),it(n,t.total_in>>16&255),it(n,t.total_in>>24&255)):(rt(n,t.adler>>>16),rt(n,65535&t.adler)),tt(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?p:_)},i.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==D&&e!==F&&e!==P&&e!==Z&&e!==$&&e!==q&&e!==H?V(t,g):(t.state=null,e===q?V(t,m):p):g},i.deflateSetDictionary=function(t,e){var i,r,s,o,l,h,u,f,c=e.length;if(!t||!t.state)return g;if(2===(o=(i=t.state).wrap)||1===o&&i.status!==D||i.lookahead)return g;for(1===o&&(t.adler=a(t.adler,e,c,0)),i.wrap=0,c>=i.w_size&&(0===o&&(Q(i.head),i.strstart=0,i.block_start=0,i.insert=0),f=new n.Buf8(i.w_size),n.arraySet(f,e,c-i.w_size,i.w_size,0),e=f,c=i.w_size),l=t.avail_in,h=t.next_in,u=t.input,t.avail_in=c,t.next_in=0,t.input=e,st(i);i.lookahead>=B;){r=i.strstart,s=i.lookahead-(B-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+B-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++}while(--s);i.strstart=r,i.lookahead=B-1,st(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=B-1,i.match_available=0,t.next_in=h,t.input=u,t.avail_in=l,i.wrap=o,p},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":35,"./adler32":36,"./crc32":38,"./messages":43,"./trees":44}],40:[function(t,e,i){"use strict";e.exports=function(t,e){var i,r,n,s,a,o,l,h,u,f,c,d,p,_,g,m,w,b,y,v,x,E,k,S,T;i=t.state,r=t.next_in,S=t.input,n=r+(t.avail_in-5),s=t.next_out,T=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),l=i.dmax,h=i.wsize,u=i.whave,f=i.wnext,c=i.window,d=i.hold,p=i.bits,_=i.lencode,g=i.distcode,m=(1<<i.lenbits)-1,w=(1<<i.distbits)-1;t:do{p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),b=_[d&m];e:for(;;){if(d>>>=y=b>>>24,p-=y,0===(y=b>>>16&255))T[s++]=65535&b;else{if(!(16&y)){if(0==(64&y)){b=_[(65535&b)+(d&(1<<y)-1)];continue e}if(32&y){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}v=65535&b,(y&=15)&&(p<y&&(d+=S[r++]<<p,p+=8),v+=d&(1<<y)-1,d>>>=y,p-=y),p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),b=g[d&w];i:for(;;){if(d>>>=y=b>>>24,p-=y,!(16&(y=b>>>16&255))){if(0==(64&y)){b=g[(65535&b)+(d&(1<<y)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&b,p<(y&=15)&&(d+=S[r++]<<p,(p+=8)<y&&(d+=S[r++]<<p,p+=8)),(x+=d&(1<<y)-1)>l){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=y,p-=y,x>(y=s-a)){if((y=x-y)>u&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(E=0,k=c,0===f){if(E+=h-y,y<v){v-=y;do{T[s++]=c[E++]}while(--y);E=s-x,k=T}}else if(f<y){if(E+=h+f-y,(y-=f)<v){v-=y;do{T[s++]=c[E++]}while(--y);if(E=0,f<v){v-=y=f;do{T[s++]=c[E++]}while(--y);E=s-x,k=T}}}else if(E+=f-y,y<v){v-=y;do{T[s++]=c[E++]}while(--y);E=s-x,k=T}for(;v>2;)T[s++]=k[E++],T[s++]=k[E++],T[s++]=k[E++],v-=3;v&&(T[s++]=k[E++],v>1&&(T[s++]=k[E++]))}else{E=s-x;do{T[s++]=T[E++],T[s++]=T[E++],T[s++]=T[E++],v-=3}while(v>2);v&&(T[s++]=T[E++],v>1&&(T[s++]=T[E++]))}break}}break}}while(r<n&&s<o);r-=v=p>>3,d&=(1<<(p-=v<<3))-1,t.next_in=r,t.next_out=s,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=s<o?o-s+257:257-(s-o),i.hold=d,i.bits=p}},{}],41:[function(t,e,i){"use strict";var r=t("../utils/common"),n=t("./adler32"),s=t("./crc32"),a=t("./inffast"),o=t("./inftrees"),l=0,h=1,u=2,f=4,c=5,d=6,p=0,_=1,g=2,m=-2,w=-3,b=-4,y=-5,v=8,x=1,E=2,k=3,S=4,T=5,I=6,j=7,A=8,L=9,R=10,z=11,O=12,U=13,B=14,N=15,C=16,M=17,D=18,F=19,P=20,Z=21,$=22,q=23,H=24,G=25,W=26,X=27,Y=28,K=29,V=30,J=31,Q=32,tt=852,et=592,it=15;function rt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function nt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function st(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=x,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(tt),e.distcode=e.distdyn=new r.Buf32(et),e.sane=1,e.back=-1,p):m}function at(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,st(t)):m}function ot(t,e){var i,r;return t&&t.state?(r=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?m:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=i,r.wbits=e,at(t))):m}function lt(t,e){var i,r;return t?(r=new nt,t.state=r,r.window=null,(i=ot(t,e))!==p&&(t.state=null),i):m}var ht,ut,ft=!0;function ct(t){if(ft){var e;for(ht=new r.Buf32(512),ut=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(h,t.lens,0,288,ht,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(u,t.lens,0,32,ut,0,t.work,{bits:5}),ft=!1}t.lencode=ht,t.lenbits=9,t.distcode=ut,t.distbits=5}function dt(t,e,i,n){var s,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),n>=a.wsize?(r.arraySet(a.window,e,i-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((s=a.wsize-a.wnext)>n&&(s=n),r.arraySet(a.window,e,i-n,s,a.wnext),(n-=s)?(r.arraySet(a.window,e,i-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0}i.inflateReset=at,i.inflateReset2=ot,i.inflateResetKeep=st,i.inflateInit=function(t){return lt(t,it)},i.inflateInit2=lt,i.inflate=function(t,e){var i,tt,et,it,nt,st,at,ot,lt,ht,ut,ft,pt,_t,gt,mt,wt,bt,yt,vt,xt,Et,kt,St,Tt=0,It=new r.Buf8(4),jt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return m;(i=t.state).mode===O&&(i.mode=U),nt=t.next_out,et=t.output,at=t.avail_out,it=t.next_in,tt=t.input,st=t.avail_in,ot=i.hold,lt=i.bits,ht=st,ut=at,Et=p;t:for(;;)switch(i.mode){case x:if(0===i.wrap){i.mode=U;break}for(;lt<16;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}if(2&i.wrap&&35615===ot){i.check=0,It[0]=255&ot,It[1]=ot>>>8&255,i.check=s(i.check,It,2,0),ot=0,lt=0,i.mode=E;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&ot)<<8)+(ot>>8))%31){t.msg="incorrect header check",i.mode=V;break}if((15&ot)!==v){t.msg="unknown compression method",i.mode=V;break}if(lt-=4,xt=8+(15&(ot>>>=4)),0===i.wbits)i.wbits=xt;else if(xt>i.wbits){t.msg="invalid window size",i.mode=V;break}i.dmax=1<<xt,t.adler=i.check=1,i.mode=512&ot?R:O,ot=0,lt=0;break;case E:for(;lt<16;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}if(i.flags=ot,(255&i.flags)!==v){t.msg="unknown compression method",i.mode=V;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=V;break}i.head&&(i.head.text=ot>>8&1),512&i.flags&&(It[0]=255&ot,It[1]=ot>>>8&255,i.check=s(i.check,It,2,0)),ot=0,lt=0,i.mode=k;case k:for(;lt<32;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}i.head&&(i.head.time=ot),512&i.flags&&(It[0]=255&ot,It[1]=ot>>>8&255,It[2]=ot>>>16&255,It[3]=ot>>>24&255,i.check=s(i.check,It,4,0)),ot=0,lt=0,i.mode=S;case S:for(;lt<16;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}i.head&&(i.head.xflags=255&ot,i.head.os=ot>>8),512&i.flags&&(It[0]=255&ot,It[1]=ot>>>8&255,i.check=s(i.check,It,2,0)),ot=0,lt=0,i.mode=T;case T:if(1024&i.flags){for(;lt<16;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}i.length=ot,i.head&&(i.head.extra_len=ot),512&i.flags&&(It[0]=255&ot,It[1]=ot>>>8&255,i.check=s(i.check,It,2,0)),ot=0,lt=0}else i.head&&(i.head.extra=null);i.mode=I;case I:if(1024&i.flags&&((ft=i.length)>st&&(ft=st),ft&&(i.head&&(xt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),r.arraySet(i.head.extra,tt,it,ft,xt)),512&i.flags&&(i.check=s(i.check,tt,ft,it)),st-=ft,it+=ft,i.length-=ft),i.length))break t;i.length=0,i.mode=j;case j:if(2048&i.flags){if(0===st)break t;ft=0;do{xt=tt[it+ft++],i.head&&xt&&i.length<65536&&(i.head.name+=String.fromCharCode(xt))}while(xt&&ft<st);if(512&i.flags&&(i.check=s(i.check,tt,ft,it)),st-=ft,it+=ft,xt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=A;case A:if(4096&i.flags){if(0===st)break t;ft=0;do{xt=tt[it+ft++],i.head&&xt&&i.length<65536&&(i.head.comment+=String.fromCharCode(xt))}while(xt&&ft<st);if(512&i.flags&&(i.check=s(i.check,tt,ft,it)),st-=ft,it+=ft,xt)break t}else i.head&&(i.head.comment=null);i.mode=L;case L:if(512&i.flags){for(;lt<16;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}if(ot!==(65535&i.check)){t.msg="header crc mismatch",i.mode=V;break}ot=0,lt=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=O;break;case R:for(;lt<32;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}t.adler=i.check=rt(ot),ot=0,lt=0,i.mode=z;case z:if(0===i.havedict)return t.next_out=nt,t.avail_out=at,t.next_in=it,t.avail_in=st,i.hold=ot,i.bits=lt,g;t.adler=i.check=1,i.mode=O;case O:if(e===c||e===d)break t;case U:if(i.last){ot>>>=7&lt,lt-=7&lt,i.mode=X;break}for(;lt<3;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}switch(i.last=1&ot,lt-=1,3&(ot>>>=1)){case 0:i.mode=B;break;case 1:if(ct(i),i.mode=P,e===d){ot>>>=2,lt-=2;break t}break;case 2:i.mode=M;break;case 3:t.msg="invalid block type",i.mode=V}ot>>>=2,lt-=2;break;case B:for(ot>>>=7&lt,lt-=7&lt;lt<32;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}if((65535&ot)!=(ot>>>16^65535)){t.msg="invalid stored block lengths",i.mode=V;break}if(i.length=65535&ot,ot=0,lt=0,i.mode=N,e===d)break t;case N:i.mode=C;case C:if(ft=i.length){if(ft>st&&(ft=st),ft>at&&(ft=at),0===ft)break t;r.arraySet(et,tt,it,ft,nt),st-=ft,it+=ft,at-=ft,nt+=ft,i.length-=ft;break}i.mode=O;break;case M:for(;lt<14;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}if(i.nlen=257+(31&ot),ot>>>=5,lt-=5,i.ndist=1+(31&ot),ot>>>=5,lt-=5,i.ncode=4+(15&ot),ot>>>=4,lt-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=V;break}i.have=0,i.mode=D;case D:for(;i.have<i.ncode;){for(;lt<3;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}i.lens[jt[i.have++]]=7&ot,ot>>>=3,lt-=3}for(;i.have<19;)i.lens[jt[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,kt={bits:i.lenbits},Et=o(l,i.lens,0,19,i.lencode,0,i.work,kt),i.lenbits=kt.bits,Et){t.msg="invalid code lengths set",i.mode=V;break}i.have=0,i.mode=F;case F:for(;i.have<i.nlen+i.ndist;){for(;mt=(Tt=i.lencode[ot&(1<<i.lenbits)-1])>>>16&255,wt=65535&Tt,!((gt=Tt>>>24)<=lt);){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}if(wt<16)ot>>>=gt,lt-=gt,i.lens[i.have++]=wt;else{if(16===wt){for(St=gt+2;lt<St;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}if(ot>>>=gt,lt-=gt,0===i.have){t.msg="invalid bit length repeat",i.mode=V;break}xt=i.lens[i.have-1],ft=3+(3&ot),ot>>>=2,lt-=2}else if(17===wt){for(St=gt+3;lt<St;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}lt-=gt,xt=0,ft=3+(7&(ot>>>=gt)),ot>>>=3,lt-=3}else{for(St=gt+7;lt<St;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}lt-=gt,xt=0,ft=11+(127&(ot>>>=gt)),ot>>>=7,lt-=7}if(i.have+ft>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=V;break}for(;ft--;)i.lens[i.have++]=xt}}if(i.mode===V)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=V;break}if(i.lenbits=9,kt={bits:i.lenbits},Et=o(h,i.lens,0,i.nlen,i.lencode,0,i.work,kt),i.lenbits=kt.bits,Et){t.msg="invalid literal/lengths set",i.mode=V;break}if(i.distbits=6,i.distcode=i.distdyn,kt={bits:i.distbits},Et=o(u,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,kt),i.distbits=kt.bits,Et){t.msg="invalid distances set",i.mode=V;break}if(i.mode=P,e===d)break t;case P:i.mode=Z;case Z:if(st>=6&&at>=258){t.next_out=nt,t.avail_out=at,t.next_in=it,t.avail_in=st,i.hold=ot,i.bits=lt,a(t,ut),nt=t.next_out,et=t.output,at=t.avail_out,it=t.next_in,tt=t.input,st=t.avail_in,ot=i.hold,lt=i.bits,i.mode===O&&(i.back=-1);break}for(i.back=0;mt=(Tt=i.lencode[ot&(1<<i.lenbits)-1])>>>16&255,wt=65535&Tt,!((gt=Tt>>>24)<=lt);){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}if(mt&&0==(240&mt)){for(bt=gt,yt=mt,vt=wt;mt=(Tt=i.lencode[vt+((ot&(1<<bt+yt)-1)>>bt)])>>>16&255,wt=65535&Tt,!(bt+(gt=Tt>>>24)<=lt);){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}ot>>>=bt,lt-=bt,i.back+=bt}if(ot>>>=gt,lt-=gt,i.back+=gt,i.length=wt,0===mt){i.mode=W;break}if(32&mt){i.back=-1,i.mode=O;break}if(64&mt){t.msg="invalid literal/length code",i.mode=V;break}i.extra=15&mt,i.mode=$;case $:if(i.extra){for(St=i.extra;lt<St;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}i.length+=ot&(1<<i.extra)-1,ot>>>=i.extra,lt-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=q;case q:for(;mt=(Tt=i.distcode[ot&(1<<i.distbits)-1])>>>16&255,wt=65535&Tt,!((gt=Tt>>>24)<=lt);){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}if(0==(240&mt)){for(bt=gt,yt=mt,vt=wt;mt=(Tt=i.distcode[vt+((ot&(1<<bt+yt)-1)>>bt)])>>>16&255,wt=65535&Tt,!(bt+(gt=Tt>>>24)<=lt);){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}ot>>>=bt,lt-=bt,i.back+=bt}if(ot>>>=gt,lt-=gt,i.back+=gt,64&mt){t.msg="invalid distance code",i.mode=V;break}i.offset=wt,i.extra=15&mt,i.mode=H;case H:if(i.extra){for(St=i.extra;lt<St;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}i.offset+=ot&(1<<i.extra)-1,ot>>>=i.extra,lt-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=V;break}i.mode=G;case G:if(0===at)break t;if(ft=ut-at,i.offset>ft){if((ft=i.offset-ft)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=V;break}ft>i.wnext?(ft-=i.wnext,pt=i.wsize-ft):pt=i.wnext-ft,ft>i.length&&(ft=i.length),_t=i.window}else _t=et,pt=nt-i.offset,ft=i.length;ft>at&&(ft=at),at-=ft,i.length-=ft;do{et[nt++]=_t[pt++]}while(--ft);0===i.length&&(i.mode=Z);break;case W:if(0===at)break t;et[nt++]=i.length,at--,i.mode=Z;break;case X:if(i.wrap){for(;lt<32;){if(0===st)break t;st--,ot|=tt[it++]<<lt,lt+=8}if(ut-=at,t.total_out+=ut,i.total+=ut,ut&&(t.adler=i.check=i.flags?s(i.check,et,ut,nt-ut):n(i.check,et,ut,nt-ut)),ut=at,(i.flags?ot:rt(ot))!==i.check){t.msg="incorrect data check",i.mode=V;break}ot=0,lt=0}i.mode=Y;case Y:if(i.wrap&&i.flags){for(;lt<32;){if(0===st)break t;st--,ot+=tt[it++]<<lt,lt+=8}if(ot!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=V;break}ot=0,lt=0}i.mode=K;case K:Et=_;break t;case V:Et=w;break t;case J:return b;case Q:default:return m}return t.next_out=nt,t.avail_out=at,t.next_in=it,t.avail_in=st,i.hold=ot,i.bits=lt,(i.wsize||ut!==t.avail_out&&i.mode<V&&(i.mode<X||e!==f))&&dt(t,t.output,t.next_out,ut-t.avail_out)?(i.mode=J,b):(ht-=t.avail_in,ut-=t.avail_out,t.total_in+=ht,t.total_out+=ut,i.total+=ut,i.wrap&&ut&&(t.adler=i.check=i.flags?s(i.check,et,ut,t.next_out-ut):n(i.check,et,ut,t.next_out-ut)),t.data_type=i.bits+(i.last?64:0)+(i.mode===O?128:0)+(i.mode===P||i.mode===N?256:0),(0===ht&&0===ut||e===f)&&Et===p&&(Et=y),Et)},i.inflateEnd=function(t){if(!t||!t.state)return m;var e=t.state;return e.window&&(e.window=null),t.state=null,p},i.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?m:(i.head=e,e.done=!1,p):m},i.inflateSetDictionary=function(t,e){var i,r=e.length;return t&&t.state?0!==(i=t.state).wrap&&i.mode!==z?m:i.mode===z&&n(1,e,r,0)!==i.check?w:dt(t,e,r,r)?(i.mode=J,b):(i.havedict=1,p):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":35,"./adler32":36,"./crc32":38,"./inffast":40,"./inftrees":42}],42:[function(t,e,i){"use strict";var r=t("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,l,h,u,f,c){var d,p,_,g,m,w,b,y,v,x=c.bits,E=0,k=0,S=0,T=0,I=0,j=0,A=0,L=0,R=0,z=0,O=null,U=0,B=new r.Buf16(16),N=new r.Buf16(16),C=null,M=0;for(E=0;E<=15;E++)B[E]=0;for(k=0;k<l;k++)B[e[i+k]]++;for(I=x,T=15;T>=1&&0===B[T];T--);if(I>T&&(I=T),0===T)return h[u++]=20971520,h[u++]=20971520,c.bits=1,0;for(S=1;S<T&&0===B[S];S++);for(I<S&&(I=S),L=1,E=1;E<=15;E++)if(L<<=1,(L-=B[E])<0)return-1;if(L>0&&(0===t||1!==T))return-1;for(N[1]=0,E=1;E<15;E++)N[E+1]=N[E]+B[E];for(k=0;k<l;k++)0!==e[i+k]&&(f[N[e[i+k]]++]=k);if(0===t?(O=C=f,w=19):1===t?(O=n,U-=257,C=s,M-=257,w=256):(O=a,C=o,w=-1),z=0,k=0,E=S,m=u,j=I,A=0,_=-1,g=(R=1<<I)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){b=E-A,f[k]<w?(y=0,v=f[k]):f[k]>w?(y=C[M+f[k]],v=O[U+f[k]]):(y=96,v=0),d=1<<E-A,S=p=1<<j;do{h[m+(z>>A)+(p-=d)]=b<<24|y<<16|v|0}while(0!==p);for(d=1<<E-1;z&d;)d>>=1;if(0!==d?(z&=d-1,z+=d):z=0,k++,0==--B[E]){if(E===T)break;E=e[i+f[k]]}if(E>I&&(z&g)!==_){for(0===A&&(A=I),m+=S,L=1<<(j=E-A);j+A<T&&!((L-=B[j+A])<=0);)j++,L<<=1;if(R+=1<<j,1===t&&R>852||2===t&&R>592)return 1;h[_=z&g]=I<<24|j<<16|m-u|0}}return 0!==z&&(h[m+z]=E-A<<24|64<<16|0),c.bits=I,0}},{"../utils/common":35}],43:[function(t,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],44:[function(t,e,i){"use strict";var r=t("../utils/common"),n=4,s=0,a=1,o=2;function l(t){for(var e=t.length;--e>=0;)t[e]=0}var h=0,u=1,f=2,c=29,d=256,p=d+1+c,_=30,g=19,m=2*p+1,w=15,b=16,y=7,v=256,x=16,E=17,k=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=new Array(2*(p+2));l(A);var L=new Array(2*_);l(L);var R=new Array(512);l(R);var z=new Array(256);l(z);var O=new Array(c);l(O);var U,B,N,C=new Array(_);function M(t,e,i,r,n){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=r,this.max_length=n,this.has_stree=t&&t.length}function D(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function F(t){return t<256?R[t]:R[256+(t>>>7)]}function P(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function Z(t,e,i){t.bi_valid>b-i?(t.bi_buf|=e<<t.bi_valid&65535,P(t,t.bi_buf),t.bi_buf=e>>b-t.bi_valid,t.bi_valid+=i-b):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function $(t,e,i){Z(t,i[2*e],i[2*e+1])}function q(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function H(t,e,i){var r,n,s=new Array(w+1),a=0;for(r=1;r<=w;r++)s[r]=a=a+i[r-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=q(s[o]++,o))}}function G(t){var e;for(e=0;e<p;e++)t.dyn_ltree[2*e]=0;for(e=0;e<_;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*v]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function W(t){t.bi_valid>8?P(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function X(t,e,i,r){var n=2*e,s=2*i;return t[n]<t[s]||t[n]===t[s]&&r[e]<=r[i]}function Y(t,e,i){for(var r=t.heap[i],n=i<<1;n<=t.heap_len&&(n<t.heap_len&&X(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!X(e,r,t.heap[n],t.depth));)t.heap[i]=t.heap[n],i=n,n<<=1;t.heap[i]=r}function K(t,e,i){var r,n,s,a,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===r?$(t,n,e):($(t,(s=z[n])+d+1,e),0!==(a=S[s])&&Z(t,n-=O[s],a),$(t,s=F(--r),i),0!==(a=T[s])&&Z(t,r-=C[s],a))}while(o<t.last_lit);$(t,v,e)}function V(t,e){var i,r,n,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=m,i=0;i<l;i++)0!==s[2*i]?(t.heap[++t.heap_len]=h=i,t.depth[i]=0):s[2*i+1]=0;for(;t.heap_len<2;)s[2*(n=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=a[2*n+1]);for(e.max_code=h,i=t.heap_len>>1;i>=1;i--)Y(t,s,i);n=l;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Y(t,s,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,s[2*n]=s[2*i]+s[2*r],t.depth[n]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,s[2*i+1]=s[2*r+1]=n,t.heap[1]=n++,Y(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,r,n,s,a,o,l=e.dyn_tree,h=e.max_code,u=e.stat_desc.static_tree,f=e.stat_desc.has_stree,c=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,_=0;for(s=0;s<=w;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<m;i++)(s=l[2*l[2*(r=t.heap[i])+1]+1]+1)>p&&(s=p,_++),l[2*r+1]=s,r>h||(t.bl_count[s]++,a=0,r>=d&&(a=c[r-d]),o=l[2*r],t.opt_len+=o*(s+a),f&&(t.static_len+=o*(u[2*r+1]+a)));if(0!==_){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,_-=2}while(_>0);for(s=p;0!==s;s--)for(r=t.bl_count[s];0!==r;)(n=t.heap[--i])>h||(l[2*n+1]!==s&&(t.opt_len+=(s-l[2*n+1])*l[2*n],l[2*n+1]=s),r--)}}(t,e),H(s,h,t.bl_count)}function J(t,e,i){var r,n,s=-1,a=e[1],o=0,l=7,h=4;for(0===a&&(l=138,h=3),e[2*(i+1)+1]=65535,r=0;r<=i;r++)n=a,a=e[2*(r+1)+1],++o<l&&n===a||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[2*x]++):o<=10?t.bl_tree[2*E]++:t.bl_tree[2*k]++,o=0,s=n,0===a?(l=138,h=3):n===a?(l=6,h=3):(l=7,h=4))}function Q(t,e,i){var r,n,s=-1,a=e[1],o=0,l=7,h=4;for(0===a&&(l=138,h=3),r=0;r<=i;r++)if(n=a,a=e[2*(r+1)+1],!(++o<l&&n===a)){if(o<h)do{$(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&($(t,n,t.bl_tree),o--),$(t,x,t.bl_tree),Z(t,o-3,2)):o<=10?($(t,E,t.bl_tree),Z(t,o-3,3)):($(t,k,t.bl_tree),Z(t,o-11,7));o=0,s=n,0===a?(l=138,h=3):n===a?(l=6,h=3):(l=7,h=4)}}l(C);var tt=!1;function et(t,e,i,n){Z(t,(h<<1)+(n?1:0),3),function(t,e,i,n){W(t),n&&(P(t,i),P(t,~i)),r.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}i._tr_init=function(t){tt||(!function(){var t,e,i,r,n,s=new Array(w+1);for(i=0,r=0;r<c-1;r++)for(O[r]=i,t=0;t<1<<S[r];t++)z[i++]=r;for(z[i-1]=r,n=0,r=0;r<16;r++)for(C[r]=n,t=0;t<1<<T[r];t++)R[n++]=r;for(n>>=7;r<_;r++)for(C[r]=n<<7,t=0;t<1<<T[r]-7;t++)R[256+n++]=r;for(e=0;e<=w;e++)s[e]=0;for(t=0;t<=143;)A[2*t+1]=8,t++,s[8]++;for(;t<=255;)A[2*t+1]=9,t++,s[9]++;for(;t<=279;)A[2*t+1]=7,t++,s[7]++;for(;t<=287;)A[2*t+1]=8,t++,s[8]++;for(H(A,p+1,s),t=0;t<_;t++)L[2*t+1]=5,L[2*t]=q(t,5);U=new M(A,S,d+1,p,w),B=new M(L,T,0,_,w),N=new M(new Array(0),I,0,g,y)}(),tt=!0),t.l_desc=new D(t.dyn_ltree,U),t.d_desc=new D(t.dyn_dtree,B),t.bl_desc=new D(t.bl_tree,N),t.bi_buf=0,t.bi_valid=0,G(t)},i._tr_stored_block=et,i._tr_flush_block=function(t,e,i,r){var l,h,c=0;t.level>0?(t.strm.data_type===o&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return a;for(e=32;e<d;e++)if(0!==t.dyn_ltree[2*e])return a;return s}(t)),V(t,t.l_desc),V(t,t.d_desc),c=function(t){var e;for(J(t,t.dyn_ltree,t.l_desc.max_code),J(t,t.dyn_dtree,t.d_desc.max_code),V(t,t.bl_desc),e=g-1;e>=3&&0===t.bl_tree[2*j[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),l=t.opt_len+3+7>>>3,(h=t.static_len+3+7>>>3)<=l&&(l=h)):l=h=i+5,i+4<=l&&-1!==e?et(t,e,i,r):t.strategy===n||h===l?(Z(t,(u<<1)+(r?1:0),3),K(t,A,L)):(Z(t,(f<<1)+(r?1:0),3),function(t,e,i,r){var n;for(Z(t,e-257,5),Z(t,i-1,5),Z(t,r-4,4),n=0;n<r;n++)Z(t,t.bl_tree[2*j[n]+1],3);Q(t,t.dyn_ltree,e-1),Q(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,c+1),K(t,t.dyn_ltree,t.dyn_dtree)),G(t),r&&W(t)},i._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(z[i]+d+1)]++,t.dyn_dtree[2*F(e)]++),t.last_lit===t.lit_bufsize-1},i._tr_align=function(t){Z(t,u<<1,3),$(t,v,A),function(t){16===t.bi_valid?(P(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":35}],45:[function(t,e,i){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],46:[function(t,e,i){(function(t){"use strict";void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,i,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var s,a,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,i)}));case 3:return t.nextTick((function(){e.call(null,i,r)}));case 4:return t.nextTick((function(){e.call(null,i,r,n)}));default:for(s=new Array(o-1),a=0;a<s.length;)s[a++]=arguments[a];return t.nextTick((function(){e.apply(null,s)}))}}}:e.exports=t}).call(this,t("_process"))},{_process:47}],47:[function(t,e,i){var r,n,s=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var h,u=[],f=!1,c=-1;function d(){f&&h&&(f=!1,h.length?u=h.concat(u):c=-1,u.length&&p())}function p(){if(!f){var t=l(d);f=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function g(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new _(t,e)),1!==u.length||f||l(p)},_.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],48:[function(t,e,i){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":49}],49:[function(t,e,i){"use strict";var r=t("process-nextick-args"),n=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};e.exports=f;var s=t("core-util-is");s.inherits=t("inherits");var a=t("./_stream_readable"),o=t("./_stream_writable");s.inherits(f,a);for(var l=n(o.prototype),h=0;h<l.length;h++){var u=l[h];f.prototype[u]||(f.prototype[u]=o.prototype[u])}function f(t){if(!(this instanceof f))return new f(t);a.call(this,t),o.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",c)}function c(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),f.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},{"./_stream_readable":51,"./_stream_writable":53,"core-util-is":27,inherits:31,"process-nextick-args":46}],50:[function(t,e,i){"use strict";e.exports=s;var r=t("./_stream_transform"),n=t("core-util-is");function s(t){if(!(this instanceof s))return new s(t);r.call(this,t)}n.inherits=t("inherits"),n.inherits(s,r),s.prototype._transform=function(t,e,i){i(null,t)}},{"./_stream_transform":52,"core-util-is":27,inherits:31}],51:[function(t,e,i){(function(i,r){"use strict";var n=t("process-nextick-args");e.exports=b;var s,a=t("isarray");b.ReadableState=w;t("events").EventEmitter;var o=function(t,e){return t.listeners(e).length},l=t("./internal/streams/stream"),h=t("safe-buffer").Buffer,u=r.Uint8Array||function(){};var f=t("core-util-is");f.inherits=t("inherits");var c=t("util"),d=void 0;d=c&&c.debuglog?c.debuglog("stream"):function(){};var p,_=t("./internal/streams/BufferList"),g=t("./internal/streams/destroy");f.inherits(b,l);var m=["error","close","destroy","pause","resume"];function w(e,i){e=e||{};var r=i instanceof(s=s||t("./_stream_duplex"));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,a=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=t("string_decoder/").StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(s=s||t("./_stream_duplex"),!(this instanceof b))return new b(e);this._readableState=new w(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function y(t,e,i,r,n){var s,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,k(t)}(t,a)):(n||(s=function(t,e){var i;r=e,h.isBuffer(r)||r instanceof u||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var r;return i}(a,e)),s?t.emit("error",s):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=function(t){return h.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):v(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||0!==e.length?v(t,a,e,!1):T(t,a)):v(t,a,e,!1))):r||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function v(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&k(t)),T(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=h.from(t,e),e=""),i=!0),y(this,t,e,!1,i)},b.prototype.unshift=function(t){return y(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=t("string_decoder/").StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var x=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=x?t=x:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(S,t):S(t))}function S(t){d("emit readable"),t.emit("readable"),L(t)}function T(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(I,t,e))}function I(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function j(t){d("readable nexttick read 0"),t.read(0)}function A(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,r=1,n=i.data;t-=n.length;for(;i=i.next;){var s=i.data,a=t>s.length?s.length:t;if(a===s.length?n+=s:n+=s.slice(0,t),0===(t-=a)){a===s.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=s.slice(a));break}++r}return e.length-=r,n}(t,e):function(t,e){var i=h.allocUnsafe(t),r=e.head,n=1;r.data.copy(i),t-=r.data.length;for(;r=r.next;){var s=r.data,a=t>s.length?s.length:t;if(s.copy(i,i.length-t,0,a),0===(t-=a)){a===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(a));break}++n}return e.length-=n,i}(t,e);return r}(t,e.buffer,e.decoder),i);var i}function z(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,n.nextTick(O,e,t))}function O(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function U(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}b.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?z(this):k(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&z(this),null;var r,n=e.needReadable;return d("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",n=!0),e.ended||e.reading?d("reading or ended",n=!1):n&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(i,e))),null===(r=t>0?R(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&z(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,d("pipe count=%d opts=%j",s.pipesCount,e);var l=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr?u:b;function h(e,i){d("onunpipe"),e===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,d("cleanup"),t.removeListener("close",m),t.removeListener("finish",w),t.removeListener("drain",f),t.removeListener("error",g),t.removeListener("unpipe",h),r.removeListener("end",u),r.removeListener("end",b),r.removeListener("data",_),c=!0,!s.awaitDrain||t._writableState&&!t._writableState.needDrain||f())}function u(){d("onend"),t.end()}s.endEmitted?n.nextTick(l):r.once("end",l),t.on("unpipe",h);var f=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,L(t))}}(r);t.on("drain",f);var c=!1;var p=!1;function _(e){d("ondata"),p=!1,!1!==t.write(e)||p||((1===s.pipesCount&&s.pipes===t||s.pipesCount>1&&-1!==U(s.pipes,t))&&!c&&(d("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function g(e){d("onerror",e),b(),t.removeListener("error",g),0===o(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",w),b()}function w(){d("onfinish"),t.removeListener("close",m),b()}function b(){d("unpipe"),r.unpipe(t)}return r.on("data",_),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",g),t.once("close",m),t.once("finish",w),t.emit("pipe",r),s.flowing||(d("pipe resume"),r.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)r[s].emit("unpipe",this,i);return this}var a=U(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)},b.prototype.on=function(t,e){var i=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&k(this):n.nextTick(j,this))}return i},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(A,t,e))}(this,t)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var n in t.on("end",(function(){if(d("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(n){(d("wrapped data"),i.decoder&&(n=i.decoder.write(n)),i.objectMode&&null==n)||(i.objectMode||n&&n.length)&&(e.push(n)||(r=!0,t.pause()))})),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var s=0;s<m.length;s++)t.on(m[s],this.emit.bind(this,m[s]));return this._read=function(e){d("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=R}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":49,"./internal/streams/BufferList":54,"./internal/streams/destroy":55,"./internal/streams/stream":56,_process:47,"core-util-is":27,events:29,inherits:31,isarray:33,"process-nextick-args":46,"safe-buffer":57,"string_decoder/":58,util:20}],52:[function(t,e,i){"use strict";e.exports=a;var r=t("./_stream_duplex"),n=t("core-util-is");function s(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var t=this;"function"==typeof this._flush?this._flush((function(e,i){l(t,e,i)})):l(this,null,null)}function l(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}n.inherits=t("inherits"),n.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var i=this;r.prototype._destroy.call(this,t,(function(t){e(t),i.emit("close")}))}},{"./_stream_duplex":49,"core-util-is":27,inherits:31}],53:[function(t,e,i){(function(i,r,n){"use strict";var s=t("process-nextick-args");function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;t.entry=null;for(;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}e.exports=w;var o,l=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?n:s.nextTick;w.WritableState=m;var h=t("core-util-is");h.inherits=t("inherits");var u={deprecate:t("util-deprecate")},f=t("./internal/streams/stream"),c=t("safe-buffer").Buffer,d=r.Uint8Array||function(){};var p,_=t("./internal/streams/destroy");function g(){}function m(e,i){o=o||t("./_stream_duplex"),e=e||{};var r=i instanceof o;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,h=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(h||0===h)?h:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,r=i.sync,n=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,r,n){--e.pendingcb,i?(s.nextTick(n,r),s.nextTick(k,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(n(r),t._writableState.errorEmitted=!0,t.emit("error",r),k(t,e))}(t,i,r,e,n);else{var a=x(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||v(t,i),r?l(y,t,i,a,n):y(t,i,a,n)}}(i,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function w(e){if(o=o||t("./_stream_duplex"),!(p.call(w,this)||this instanceof o))return new w(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function b(t,e,i,r,n,s,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,i?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function y(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),k(t,e)}function v(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),s=e.corkedRequestsFree;s.entry=i;for(var o=0,l=!0;i;)n[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;n.allBuffers=l,b(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;i;){var h=i.chunk,u=i.encoding,f=i.callback;if(b(t,e,!1,e.objectMode?1:h.length,h,u,f),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final((function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),k(t,e)}))}function k(t,e){var i=x(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,s.nextTick(E,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}h.inherits(w,f),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===w&&(t&&t._writableState instanceof m)}})):p=function(t){return t instanceof this},w.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},w.prototype.write=function(t,e,i){var r,n=this._writableState,a=!1,o=!n.objectMode&&(r=t,c.isBuffer(r)||r instanceof d);return o&&!c.isBuffer(t)&&(t=function(t){return c.from(t)}(t)),"function"==typeof e&&(i=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof i&&(i=g),n.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),s.nextTick(e,i)}(this,i):(o||function(t,e,i,r){var n=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),s.nextTick(r,a),n=!1),n}(this,n,t,i))&&(n.pendingcb++,a=function(t,e,i,r,n,s){if(!i){var a=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,i));return e}(e,r,n);r!==a&&(i=!0,n="buffer",r=a)}var o=e.objectMode?1:r.length;e.length+=o;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:s,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,o,r,n,s);return l}(this,n,o,t,e,i)),a},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||v(this,t))},w.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},w.prototype._writev=null,w.prototype.end=function(t,e,i){var r=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,i){e.ending=!0,k(t,e),i&&(e.finished?s.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,r,i)},Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),w.prototype.destroy=_.destroy,w.prototype._undestroy=_.undestroy,w.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{"./_stream_duplex":49,"./internal/streams/destroy":55,"./internal/streams/stream":56,_process:47,"core-util-is":27,inherits:31,"process-nextick-args":46,"safe-buffer":57,timers:93,"util-deprecate":94}],54:[function(t,e,i){"use strict";var r=t("safe-buffer").Buffer,n=t("util");e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,i,n,s=r.allocUnsafe(t>>>0),a=this.head,o=0;a;)e=a.data,i=s,n=o,e.copy(i,n),o+=a.data.length,a=a.next;return s},t}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":57,util:20}],55:[function(t,e,i){"use strict";var r=t("process-nextick-args");function n(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var i=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(n,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(n,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":46}],56:[function(t,e,i){e.exports=t("events").EventEmitter},{events:29}],57:[function(t,e,i){var r=t("buffer"),n=r.Buffer;function s(t,e){for(var i in t)e[i]=t[i]}function a(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(s(r,i),i.Buffer=a),s(n,a),a.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},{buffer:24}],58:[function(t,e,i){"use strict";var r=t("safe-buffer").Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=h,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=u,this.end=f,e=3;break;default:return this.write=c,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function c(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}i.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},s.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var n=a(e[r]);if(n>=0)return n>0&&(t.lastNeed=n-1),n;if(--r<i||-2===n)return 0;if((n=a(e[r]))>=0)return n>0&&(t.lastNeed=n-2),n;if(--r<i||-2===n)return 0;if((n=a(e[r]))>=0)return n>0&&(2===n?n=0:t.lastNeed=n-3),n;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":57}],59:[function(t,e,i){e.exports=t("./readable").PassThrough},{"./readable":60}],60:[function(t,e,i){(i=e.exports=t("./lib/_stream_readable.js")).Stream=i,i.Readable=i,i.Writable=t("./lib/_stream_writable.js"),i.Duplex=t("./lib/_stream_duplex.js"),i.Transform=t("./lib/_stream_transform.js"),i.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":49,"./lib/_stream_passthrough.js":50,"./lib/_stream_readable.js":51,"./lib/_stream_transform.js":52,"./lib/_stream_writable.js":53}],61:[function(t,e,i){e.exports=t("./readable").Transform},{"./readable":60}],62:[function(t,e,i){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":53}],63:[function(t,e,i){e.exports=n;var r=t("events").EventEmitter;function n(){r.call(this)}t("inherits")(n,r),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){var i=this;function n(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function s(){i.readable&&i.resume&&i.resume()}i.on("data",n),t.on("drain",s),t._isStdio||e&&!1===e.end||(i.on("end",o),i.on("close",l));var a=!1;function o(){a||(a=!0,t.end())}function l(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(u(),0===r.listenerCount(this,"error"))throw t}function u(){i.removeListener("data",n),t.removeListener("drain",s),i.removeListener("end",o),i.removeListener("close",l),i.removeListener("error",h),t.removeListener("error",h),i.removeListener("end",u),i.removeListener("close",u),t.removeListener("close",u)}return i.on("error",h),t.on("error",h),i.on("end",u),i.on("close",u),t.on("close",u),t.emit("pipe",i),t}},{events:29,inherits:31,"readable-stream/duplex.js":48,"readable-stream/passthrough.js":59,"readable-stream/readable.js":60,"readable-stream/transform.js":61,"readable-stream/writable.js":62}],64:[function(t,e,i){(function(i,r){var n=t("stream").Stream,s=t("util"),a=t("buffer-equal"),o=t("bitreader"),l=t("./lib/chunk.js");function h(t){if(!(this instanceof h))return new h(t);if(this.parser=new o,this.strict=!0,this.writable=!0,this.readable=!0,this.finished=!1,this.chunks=[],this.injections=[],t)if(r.isBuffer(t))this.end(t);else{if("function"!=typeof t.pipe){var e=new TypeError("PNG constructor takes either a buffer or a stream");throw e.input=t,e.inputType=typeof t,e}t.pipe(this)}}s.inherits(h,n),h.Chunk=l,h.prototype.delayEmit=function(){var t=arguments;return i.nextTick(function(){this.emit.apply(this,t)}.bind(this)),this},h.prototype.write=function(t){return t?(this.delayEmit("data",t),this.parser.write(t),this.process(),this):this},h.prototype.end=function(t){return t&&this.write(t),this.writable=!1,this.finished=!0,this.delayEmit("end",this.chunks),this.processInjections(),this},h.prototype.addChunk=function(t){return this.chunks.push(t),this[t.type]?this[t.type].push(t):this[t.type]=[t],this},h.prototype._readSignature=function(){var t,e=this.parser,i=h.SIGNATURE,r=e.getBuffer().length,n=i.length;return r<n?this:(t=e.eat(n),a(t,i)?(this.delayEmit("signature"),this.process(),this):(this.delayEmit("error",new TypeError("Signature mismatch, not a PNG")),this.writable=!1,this))},h.prototype.process=function(){var t=this.parser;if(t.position()<8)return this._readSignature();var e=t.remaining();if(!e||e<4)return this;var i=t.peak(4).readUInt32BE(0);if(e<(i+=h.TYPE_LENGTH+h.CRC_LENGTH))return this;try{var r=new l(t,this.IHDR)}catch(t){return this.delayEmit("error",t),this}return"IDAT"!==r.type||this.IDAT||this.delayEmit("imagedata begin"),this.addChunk(r),this.delayEmit("chunk",r),this.delayEmit(r.type,r),"IEND"!==r.type&&this.process(),this},h.prototype.inject=function(t,e,i){return"function"==typeof e&&(i=e,e={test:"same"}),i||(i=!0),this.injections.push({chunk:t,opts:e,condition:i}),this.finished&&this.processInjections(),this},h.prototype.processInjections=function(){if(this.injections.length){var t,e=this.chunks,i=[];return this.injections.forEach((function(r){var n=r.opts,s=r.chunk.type,a=r.condition;if(!0===a)return i.push(r.chunk);for(t=0;t<e.length;t++)if(("same"!==n.test||e[t].type===s)&&!1===a(e[t]))return!1;i.push(r.chunk)})),this.injections=[],e.splice.bind(e,1,0).apply(null,i),this}},h.prototype.out=function(t,e){var s=e||new n;s.readable=!0;var a=this.chunks,o=a.length,l=0,u=[],f=h.SIGNATURE;if(!this.finished){var c=this.out.bind(this,t,s);return this.once("end",c),s}function d(e,n){var a;(u[n]=e,++l===o)&&(u.unshift(f),a=r.concat(u),t&&t(null,a),i.nextTick((function(){s.emit("data",a),s.emit("end",a),s.readable=!1})))}return a.forEach((function(t,e){if(t._buffer)return d(t._buffer,e);t.out((function(t){d(t,e)}))})),s},h.prototype.destroy=function(){},h.SIGNATURE=r([137,80,78,71,13,10,26,10]),h.TYPE_LENGTH=4,h.CRC_LENGTH=4,e.exports=h}).call(this,t("_process"),t("buffer").Buffer)},{"./lib/chunk.js":65,_process:47,bitreader:14,buffer:24,"buffer-equal":92,stream:63,util:97}],65:[function(t,e,i){(function(i){var r=t("bitreader");t("./chunks/base.js");function n(t,e){if("function"!=typeof t.eat&&(t=r(t)),this.parser=t,this.header=e,t.remaining()>=12)return this._process()}n.prototype._process=function(){var t=this.parser,e=t.eat(4),r=e.readUInt32BE(0),s=t.eat(4),a=s.toString();if(!a.match(/\w+/))throw new Error("invalid chunk type, got: "+this.type);var o=r?t.eat(r):i(0),l=t.eat(4),h=new(n[a]||n.Unknown)(o,this.header,a);return h.crc=l,h._rawData=o,h._buffer=i.concat([e,s,o,l]),h},n.Unknown=function(t,e,i){this.type=i,this.data=t,this.header=e},n.IHDR=n.ImageHeader=t("./chunks/image-header.js"),n.PLTE=n.Palette=t("./chunks/palette.js"),n.IDAT=n.ImageData=t("./chunks/image-data.js"),n.IEND=n.ImageTrailer=t("./chunks/image-trailer.js"),n.tEXt=n.TextualData=t("./chunks/textual-data.js"),n.zTXt=n.CompressedText=t("./chunks/compressed-text.js"),n.iTXt=n.InternationalText=t("./chunks/international-text.js"),n.cHRM=n.Chromaticities=t("./chunks/chromaticities.js"),n.gAMA=n.Gamma=t("./chunks/gamma.js"),n.tRNS=n.Transparency=t("./chunks/transparency.js"),n.iCCP=n.ICCProfile=t("./chunks/icc-profile.js"),n.bKGD=n.BackgroundColour=t("./chunks/background-colour.js"),n.pHYs=n.PhysicalDimensions=t("./chunks/physical-dimensions.js"),n.sRGB=n.StandardRGBColourSpace=t("./chunks/srgb.js"),n.sBIT=n.SignificantBits=t("./chunks/significant-bits.js"),n.hIST=n.Histogram=t("./chunks/histogram.js"),n.sPLT=n.SuggestedPalette=t("./chunks/suggested-palette.js"),n.tIME=n.LastModified=t("./chunks/last-modified.js"),n.oFFs=n.Offset=t("./chunks/offset.js"),n.pCAL=n.PixelCalibration=t("./chunks/pixel-calibration.js"),n.sCAL=n.Scale=t("./chunks/scale.js"),n.gIFg=n.GifControl=t("./chunks/gif-control.js"),n.gIFx=n.GifApplication=t("./chunks/gif-application.js"),n.sTER=n.Stereogram=t("./chunks/stereogram.js"),e.exports=n}).call(this,t("buffer").Buffer)},{"./chunks/background-colour.js":66,"./chunks/base.js":67,"./chunks/chromaticities.js":68,"./chunks/compressed-text.js":69,"./chunks/gamma.js":70,"./chunks/gif-application.js":71,"./chunks/gif-control.js":72,"./chunks/histogram.js":73,"./chunks/icc-profile.js":74,"./chunks/image-data.js":75,"./chunks/image-header.js":76,"./chunks/image-trailer.js":77,"./chunks/international-text.js":78,"./chunks/last-modified.js":79,"./chunks/offset.js":80,"./chunks/palette.js":81,"./chunks/physical-dimensions.js":82,"./chunks/pixel-calibration.js":83,"./chunks/scale.js":84,"./chunks/significant-bits.js":85,"./chunks/srgb.js":86,"./chunks/stereogram.js":87,"./chunks/suggested-palette.js":88,"./chunks/textual-data.js":89,"./chunks/transparency.js":90,bitreader:14,buffer:24}],66:[function(t,e,i){var r=t("./base.js").make("bKGD");r.prototype.initialize=function(t,e){var i=this.getParser(t);this.type="bKGD";var r=this.colourType=e.colourType;0===r||4===r?this.greyscale=i.eatUInt(2):2===r||6===r?(this.red=i.eatUInt(2),this.green=i.eatUInt(2),this.blue=i.eatUInt(2)):this.paletteIndex=i.eatUInt(1)},r.prototype.writeData=function(t){var e=this.colourType;return 0===e||4===e?(t.write8(this.greyscale),t):2===e||6===e?(t.write16(this.red).write16(this.green).write16(this.blue),t):(t.write8(this.paletteIndex),t)},r.prototype.length=function(){var t=this.colourType;return 0===t||4===t?2:2===t||6===t?6:1},e.exports=r},{"./base.js":67}],67:[function(t,e,i){(function(i){var r=t("buffer-crc32"),n=t("util"),s=t("zlib"),a=t("bitreader"),o=t("bitwriter");function l(){}function h(t,e){var n=i.concat([i(t),e]);return r(n)}function u(t,e){this.length=o(4),this.type=i(e),this.data=o(t),this.length.write32(t),this.data.attach(this)}l.inherits=function(t){n.inherits(t,l)},l.make=function(t,e){var r=function e(r,n){return this instanceof e?(this.type=t,i.isBuffer(r)?(this._rawData=r,void(this.initialize&&this.initialize(r,n))):this.create(r)):new e(r,n)};return l.inherits(r),r},l.prototype.getParser=function(t){return new a(t||this._rawData)},l.prototype.getComputedCrc=function(){return h(this.type,this._rawData)},l.prototype.create=function(t){Object.keys(t).forEach(function(e){this[e]||(this[e]=t[e])}.bind(this))},l.prototype.inflate=function(t){var e,i;return this.compressedProfile?(e="compressedProfile",i="profile"):(e="compressedText",i="text"),t||(t=function(){}),this[i]?t(null,this[i]):(s.inflate(this[e],(function(e,r){if(e)return t(e);this[i]=r.toString().replace(/\u0000$/,""),t(null,this[i])})),this)},l.prototype.out=function(t){if(!this.writeData)throw new Error("Needs implementation");var e=this.writeData(this._outputPrepare());e&&t(e.done())},l.prototype.length=function(){throw new Error("Need implementation")},l.prototype.set=function(t,e){return void 0===e?this:e===this[t]?this:(this[t]=e,this._buffer=null,this)},l.prototype.get=function(t){return this[t]},l.prototype._outputPrepare=function(t){if(void 0===t&&(t=this.length?this.length():null),"number"!=typeof t||isNaN(t))throw new TypeError("Argument must be a number, got "+t);var e=new u(t,this.type);return this._rawData=e.data,e},u.prototype.done=function(t){return this.result=i.concat([this.length,this.type,this.data,h(this.type,this.data)]),t?t(this.result):this.result},e.exports=l}).call(this,t("buffer").Buffer)},{bitreader:14,bitwriter:16,buffer:24,"buffer-crc32":23,util:97,zlib:22}],68:[function(t,e,i){var r=t("./base.js"),n=t("../util.js"),s=n.Point,a=r.make("cHRM");a.prototype.initialize=function(t){var e=this.getParser(t);function i(){var t=n.fourByteFraction(e.eat(4)),i=n.fourByteFraction(e.eat(4));return new s(t,i)}this.whitePoint=i(),this.red=i(),this.green=i(),this.blue=i()},a.prototype.writeData=function(t){return t.write32(n.intFromFourByteFraction(this.whitePoint.x)).write32(n.intFromFourByteFraction(this.whitePoint.y)).write32(n.intFromFourByteFraction(this.red.x)).write32(n.intFromFourByteFraction(this.red.y)).write32(n.intFromFourByteFraction(this.green.x)).write32(n.intFromFourByteFraction(this.green.y)).write32(n.intFromFourByteFraction(this.blue.x)).write32(n.intFromFourByteFraction(this.blue.y)),t},a.prototype.length=function(){return 32},e.exports=a},{"../util.js":91,"./base.js":67}],69:[function(t,e,i){var r=t("./base.js"),n=t("zlib"),s=r.make("zTXt");s.prototype.initialize=function(t){var e=this.getParser(t);this.keyword=e.eatString(),this.compressionMethod=e.eatUInt(1),this.compressedText=e.eatRest(),this.text=null},s.prototype.out=function(t){n.deflate(this.text,function(e,i){e&&(e.message="there was a problem deflating the text: "+e.message,t(e));var r=this.keyword.length+1+1+i.length,n=this._outputPrepare(r);n.write(this.keyword).write(this.compressionMethod||0).write(i),n.done(t)}.bind(this))},e.exports=s},{"./base.js":67,zlib:22}],70:[function(t,e,i){var r=t("./base.js"),n=t("../util.js"),s=r.make("gAMA");s.prototype.initialize=function(t){var e=this.getParser(t);this.gamma=n.fourByteFraction(e.eat(4))},s.prototype.writeData=function(t){return t.write32(n.intFromFourByteFraction(this.gamma)),t},s.prototype.length=function(){return 4},e.exports=s},{"../util.js":91,"./base.js":67}],71:[function(t,e,i){var r=t("./base.js").make("gIFx");r.prototype.initialize=function(t){var e=this.getParser(t);this.appIdentifier=e.eat(8).toString().replace(/\u0000/g,""),this.authCode=e.eat(3),this.appData=e.eatRest()},r.prototype.length=function(){var t=8;return t+=3,t+=this.appData.length},r.prototype.writeData=function(t){return t.writeString(this.appIdentifier,{size:8}).write(this.authCode).write(this.appData),t},e.exports=r},{"./base.js":67}],72:[function(t,e,i){var r=t("./base.js").make("gIFg");r.prototype.initialize=function(t){var e=this.getParser(t);this.disposalMethod=e.eatUInt(1),this.userInput=e.eatBool(),this.delay=e.eatUInt(2)},r.prototype.length=function(){return 4},r.prototype.writeData=function(t){return t.write(this.disposalMethod).write(0|this.userInput).write16(this.delay),t},r.DISPOSAL_METHODS=["none","background","previous"],r.NONE=0,r.BACKGROUND=1,r.PREVIOUS=2,e.exports=r},{"./base.js":67}],73:[function(t,e,i){var r=t("./base.js"),n=t("../util.js"),s=r.make("hIST");s.prototype.initialize=function(t){var e=this.getParser(t);this.frequencies=e.eatRest({chunkSize:2}).map(n.to16Bit)},s.prototype.length=function(){return 2*this.frequencies.length},s.prototype.writeData=function(t){return this.frequencies.forEach((function(e){t.write16(e)})),t},e.exports=s},{"../util.js":91,"./base.js":67}],74:[function(t,e,i){(function(i){var r=t("./base.js"),n=(t("zlib"),r.make("iCCP"));n.prototype.initialize=function(t){var e=this.getParser(t);this.profileName=e.eatString(),this.compressionMethod=e.eatUInt(1),this.compressedProfile=e.eatRest()},n.prototype.writeData=function(t){return t.write(this.profileName).write(this.compressionMethod).write(this.compressedProfile),t},n.prototype.length=function(){return i(this.profileName).length+1+1+this.compressedProfile.length},e.exports=n}).call(this,t("buffer").Buffer)},{"./base.js":67,buffer:24,zlib:22}],75:[function(t,e,i){var r=t("./base.js").make("IDAT");r.prototype.initialize=function(t){var e=this.getParser(t);this.type="IDAT",this.critical=!0,this.data=e.getBuffer()},r.prototype.writeData=function(t){return t.write(this.data),t},r.prototype.length=function(){return this.data.length},e.exports=r},{"./base.js":67}],76:[function(t,e,i){var r=t("./base.js").make("IHDR");r.prototype.initialize=function(t){var e=this.getParser(t);this.critical=!0,this.width=e.eatUInt(4),this.height=e.eatUInt(4),this.bitDepth=e.eatUInt(1),this.colourType=e.eatUInt(1),this.compressionMethod=e.eatUInt(1),this.filterMethod=e.eatUInt(1),this.interlaceMethod=e.eatUInt(1)},r.prototype.writeData=function(t){var e=this.colourType;return void 0===e&&(e=this.colorType),t.write32(this.width).write32(this.height).write8(this.bitDepth).write8(e).write8(this.compressionMethod||0).write8(this.filterMethod||0).write8(this.interlaceMethod||0),t},r.prototype.length=function(){return 13},r.COLOUR_TYPES={0:"greyscale",2:"truecolour",3:"indexed-colour",4:"greyscale with alpha",6:"truecolour with alpha"},r.GREYSCALE=0,r.TRUECOLOUR=2,r.INDEXED_COLOUR=3,r.GREYSCALE_ALPHA=4,r.TRUECOLOUR_ALPHA=6,r.BIT_DEPTHS={greyscale:[1,2,4,8,16],truecolour:[8,16],"indexed-colour":[1,2,4,8],"greyscale with alpha":[8,16],"truecolour with alpha":[8,16]},r.INTERLACE_METHODS={0:"none",1:"adam7"},r.NONE=0,r.ADAM7=1,r.COMPRESSION_METHODS={0:"zlib deflate/inflate"},r.ZLIB=0,r.FILTER_METHODS={0:"standard"},r.STANDARD=0,e.exports=r},{"./base.js":67}],77:[function(t,e,i){(function(i){var r=t("./base.js").make("IEND");r.prototype.out=function(t){return t(i([0,0,0,0,73,69,78,68,174,66,96,130]))},e.exports=r}).call(this,t("buffer").Buffer)},{"./base.js":67,buffer:24}],78:[function(t,e,i){(function(i){var r=t("./base.js"),n=t("zlib"),s=r.make("iTXt");s.prototype.initialize=function(t){var e=this.getParser(t);this.keyword=e.eatString(),this.compressed=e.eatBool(),this.compressionMethod=e.eatUInt(1),this.languageTag=e.eatString(),this.translatedKeyword=e.eatString(),this.compressedText=e.eatRest(),this.compressed||(this.text=this.compressedText.toString())},s.prototype.out=function(t){if(!this.compressed)return this._startOutput(this.text).done(t);n.deflate(this.text,function(e,i){if(e)return t(new Error("there was a problem deflating the text:"+e));this.compressedText=i,this._startOutput(i).done(t)}.bind(this))},s.prototype._startOutput=function(t){var e=this._outputPrepare();return e.write(this.keyword).write(0|!!this.compressed).write(this.compressionMethod||0).write(this.languageTag||"").write(this.translatedKeyword||"").write(t),e},s.prototype.length=function(){return this.keyword.length+1+1+1+(i(this.languageTag||"").length+1)+(i(this.translatedKeyword||"").length+1)+(this.compressed?this.compressedText.length:i(this.text||"").length)},e.exports=s}).call(this,t("buffer").Buffer)},{"./base.js":67,buffer:24,zlib:22}],79:[function(t,e,i){var r=t("./base.js").make("tIME");r.prototype.initialize=function(t){var e=this.getParser(t);this.year=e.eatUInt(2),this.month=e.eatUInt(1),this.day=e.eatUInt(1),this.hour=e.eatUInt(1),this.minute=e.eatUInt(1),this.second=e.eatUInt(1),this.date=new Date(this.year,this.month-1,this.day,this.hour-1,this.minute,this.second)},r.prototype.writeData=function(t){return t.write16(this.year).write8(this.month).write8(this.day).write8(this.hour).write8(this.minute).write8(this.second),t},r.prototype.length=function(){return 7},e.exports=r},{"./base.js":67}],80:[function(t,e,i){var r=t("./base.js"),n=t("../util.js").Point,s=r.make("oFFs");s.prototype.initialize=function(t){var e=this.getParser(t),i=e.eatInt(4),r=e.eatInt(4);this.position=new n(i,r),this.unitSpecifier=e.eatUInt(1)},s.prototype.length=function(){return 9},s.prototype.writeData=function(t){return t.write32(this.position.x).write32(this.position.y).write(this.unitSpecifier),t},s.UNIT_SPECIFIERS=["pixels","microns"],s.PIXELS=0,s.MICRONS=1,e.exports=s},{"../util.js":91,"./base.js":67}],81:[function(t,e,i){var r=t("./base"),n=t("../util.js").Colour,s=r.make("PLTE");s.prototype.initialize=function(t){var e,i=this.getParser(t);for(this.critical=!0,this.colours=[];e=i.eat(3);)this.colours.push(new n(e[0],e[1],e[2]))},s.prototype.writeData=function(t){return(this.colours||this.colors).forEach((function(e){t.write8(e.red).write8(e.green).write8(e.blue)})),t},s.prototype.length=function(){return 3*this.colours.length},e.exports=s},{"../util.js":91,"./base":67}],82:[function(t,e,i){var r=t("./base.js"),n=t("../util.js").Point,s=r.make("pHYs");s.prototype.initialize=function(t){var e=this.getParser(t);this.pixelsPerUnit=new n(e.eatUInt(4),e.eatUInt(4)),this.unitSpecifier=e.eatUInt(1)},s.prototype.writeData=function(t){var e=this.pixelsPerUnit;return t.write32(e.x||e[0]).write32(e.y||e[1]).write8(this.unitSpecifier),t},s.prototype.length=function(){return 9},s.UNIT_SPECIFIERS=["unknown","meter"],e.exports=s},{"../util.js":91,"./base.js":67}],83:[function(t,e,i){var r=t("./base.js").make("pCAL");r.prototype.initialize=function(t){var e=this.getParser(t);this.name=e.eatString(),this.originalZero=e.eatInt(4),this.originalMaximum=e.eatInt(4),this.equationType=e.eatUInt(1);e.eatUInt(1);for(this.parameters=[];e.remaining();)this.parameters.push({unit:e.eatString(),parameter:parseFloat(e.eatString())})},r.prototype.length=function(){var t=0;return t+=this.name.length+1,t+=4,t+=4,t+=1,t+=1,t=this.parameters.reduce((function(t,e){return t+(e.unit.length+1)+(e.parameter.toString().length+1)}),t),t-=1},r.prototype.writeData=function(t){return t.write(this.name),t.write32(this.originalZero),t.write32(this.originalMaximum),t.write8(this.equationType),t.write8(this.parameters.length),this.parameters.forEach((function(e){t.write(e.unit),t.write(e.parameter.toString())})),t},r.EQUATION_TYPES=["linear","base-e exponential","arbitrary-base exponential","hyperbolic"],r.LINEAR=0,r.BASE_E_EXPONENTAL=1,r.ARIBTRARY_BASE_EXPONENTIAL=2,r.HYPERBOLIC=3,e.exports=r},{"./base.js":67}],84:[function(t,e,i){var r=t("./base.js").make("sCAL");r.prototype.initialize=function(t){var e=this.getParser(t);this.unitSpecifier=e.eatUInt(1),this.width=parseFloat(e.eatString()),this.height=parseFloat(e.eatString())},r.prototype.length=function(){var t=1;return t+=this.width.toString().length+1,t+=this.height.toString().length},r.prototype.writeData=function(t){return t.write8(this.unitSpecifier).write(this.width.toString()).write(this.height.toString()),t},r.UNIT_SPECIFIERS=["meters","radians"],r.METERS=0,r.RADIANS=1,e.exports=r},{"./base.js":67}],85:[function(t,e,i){var r=t("./base.js").make("sBIT");r.prototype.initialize=function(t,e){var i=this.getParser(t),r=this.colourType=e.colourType;0===r?this.greyscale=i.eatUInt(1):2===r||3===r?(this.red=i.eatUInt(1),this.green=i.eatUInt(1),this.blue=i.eatUInt(1)):4===r?(this.greyscale=i.eatUInt(1),this.alpha=i.eatUInt(1)):6===r&&(this.red=i.eatUInt(1),this.green=i.eatUInt(1),this.blue=i.eatUInt(1),this.alpha=i.eatUInt(1))},r.prototype.length=function(){var t=this.colourType;return 0===t?1:2===t||3===t?3:4===t?2:6===t?4:void 0},r.prototype.writeData=function(t){var e=this.colourType;return 0===e?t.write(this.greyscale):2===e||3===e?(t.write(this.red).write(this.green).write(this.blue),t):4===e?(t.write(this.greyscale).write(this.alpha),t):6===e?(t.write(this.red).write(this.green).write(this.blue).write(this.alpha),t):void 0},e.exports=r},{"./base.js":67}],86:[function(t,e,i){var r=t("./base.js").make("sRGB");r.prototype.initialize=function(t){var e=this.getParser(t);this.renderingIntent=e.eatUInt(1)},r.prototype.length=function(){return 1},r.prototype.writeData=function(t){return t.write(this.renderingIntent),t},r.RENDERING_INTENTS=["perceptual","relative colorimetric","saturation","absolute colorimetric"],r.PERCEPTUAL=0,r.RELATIVE_COLORIMETRIC=1,r.SATURATION=2,r.ABSOLUTE_COLORIMETRIC=3,e.exports=r},{"./base.js":67}],87:[function(t,e,i){function r(t){var e=this.getParser(t);this.type="sTER",this.mode=e.eatUInt(1)}t("./base.js").inherits(r),r.MODES=["cross-fuse","diverging-fuse"],r.CROSS_FUSE=0,r.DIVERGING_FUSE=1,e.exports=r},{"./base.js":67}],88:[function(t,e,i){(function(i){var r=t("./base.js").make("sPLT");r.prototype.initialize=function(t){var e,i,r=this.getParser(t);this.paletteName=r.eatString(),this.sampleDepth=r.eatUInt(1),this.palette=[],i=2===(e=16===this.sampleDepth?2:1)?10:6,this.palette=r.eatRest({chunkSize:i}).map(function(t){var i=this.getParser(t);return{red:i.eatUInt(e),green:i.eatUInt(e),blue:i.eatUInt(e),alpha:i.eatUInt(e),frequency:i.eatUInt(2)}}.bind(this))},r.prototype.sizes=function(t){var e=16===(this.sampleDepth||t)?2:1;return{colour:e,chunk:2===e?10:6}},r.prototype.length=function(){var t=this.sizes();return i(this.paletteName).length+1+1+this.palette.length*t.chunk},r.prototype.writeData=function(t){var e=t["write"+this.sampleDepth];return t.write(this.paletteName.trim()).write(sampleDepth),this.palette.forEach((function(i){e(i.red),e(i.green),e(i.blue),e(i.alpha),t.write16(i.frequency)})),t},e.exports=r}).call(this,t("buffer").Buffer)},{"./base.js":67,buffer:24}],89:[function(t,e,i){(function(i){var r=t("./base.js").make("tEXt");r.prototype.initialize=function(t){var e=this.getParser(t);this.keyword=e.eatString();var i=e.eatRest();this.text=i&&null!==i?i.toString():""},r.prototype.writeData=function(t){return t.write(this.keyword).write(this.text),t},r.prototype.length=function(){return this.keyword.length+1+i(this.text).length},e.exports=r}).call(this,t("buffer").Buffer)},{"./base.js":67,buffer:24}],90:[function(t,e,i){var r=t("./base.js").make("tRNS");r.prototype.initialize=function(t,e){var i=this.getParser(t);this.type="tRNS";var r=this.colourType=e.colourType;if(0===r)this.greyscale=i.eatUInt(2);else if(2===r)this.red=i.eatUInt(2),this.green=i.eatUInt(2),this.blue=i.eatUInt(2);else if(3===r){var n;for(this.palette=[];n=i.eat(1);)this.palette.push(n.readUInt8(0))}},r.prototype.length=function(){var t=this.colourType;return 0===t?2:2===t?6:this.palette.length},r.prototype.writeData=function(t){var e=this.colourType;return 0===e?(t.write16(this.greyscale),t):2===e?(t.write16(this.red).write16(this.green).write16(this.blue),t):(this.palette.forEach(t.write8),t)},e.exports=r},{"./base.js":67}],91:[function(t,e,i){t("buffer").Buffer;function r(t,e,i){this.r=this.red=this[0]=t,this.g=this.green=this[1]=e,this.b=this.blue=this[2]=i}function n(t,e){this.x=this[0]=t,this.y=this[1]=e}r.prototype.equals=function(t){return this.red===t.red&&this.green===t.green&&this.blue===t.blue},n.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},i.fourByteFraction=function(t){return t.readUInt32BE(0)/1e5},i.intFromFourByteFraction=function(t){return Math.ceil(1e5*t)},i.Colour=r,i.Point=n,i.to16Bit=function(t){return t.readUInt16BE(0)}},{buffer:24}],92:[function(t,e,i){var r=t("buffer").Buffer;e.exports=function(t,e){if(r.isBuffer(t)&&r.isBuffer(e)){if("function"==typeof t.equals)return t.equals(e);if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}},{buffer:24}],93:[function(t,e,i){(function(e,r){var n=t("process/browser.js").nextTick,s=Function.prototype.apply,a=Array.prototype.slice,o={},l=0;function h(t,e){this._id=t,this._clearFn=e}i.setTimeout=function(){return new h(s.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new h(s.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(t){t.close()},h.prototype.unref=h.prototype.ref=function(){},h.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},i.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},i._unrefActive=i.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i.setImmediate="function"==typeof e?e:function(t){var e=l++,r=!(arguments.length<2)&&a.call(arguments,1);return o[e]=!0,n((function(){o[e]&&(r?t.apply(null,r):t.call(null),i.clearImmediate(e))})),e},i.clearImmediate="function"==typeof r?r:function(t){delete o[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":47,timers:93}],94:[function(t,e,i){(function(t){function i(e){try{if(!t.localStorage)return!1}catch(t){return!1}var i=t.localStorage[e];return null!=i&&"true"===String(i).toLowerCase()}e.exports=function(t,e){if(i("noDeprecation"))return t;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],95:[function(t,e,i){arguments[4][10][0].apply(i,arguments)},{dup:10}],96:[function(t,e,i){arguments[4][11][0].apply(i,arguments)},{dup:11}],97:[function(t,e,i){arguments[4][12][0].apply(i,arguments)},{"./support/isBuffer":96,_process:47,dup:12,inherits:95}]},{},[1]);